(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2944],{17269:function(e,t,s){"use strict";var r,l=s(52846);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}t.Z=e=>l.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},e),r||(r=l.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.191 1.414 1.706 9.9m0 0 8.485 8.486M1.706 9.899h16.97"})))},70772:function(e,t,s){Promise.resolve().then(s.bind(s,87740))},58165:function(e,t,s){"use strict";s.d(t,{v:function(){return o}});var r=s(57437);s(2265);var l=s(25622),a=s.n(l),n=s(16480),i=s.n(n);function o(e){let{name:t,isChecked:s,handleClickFilter:l,isDisabled:n}=e;return(0,r.jsx)("div",{role:"checkbox","aria-checked":s,className:i()(a().root,{[a().active]:s},{[a().disabled]:n}),onClick:l(s,t),children:(0,r.jsx)("span",{children:t})})}},87740:function(e,t,s){"use strict";s.r(t),s.d(t,{Main:function(){return t2}});var r,l,a,n,i,o,c,u,d,_,h,p,m,v=s(57437),y=s(2265),f=s(99931),x=s.n(f),b=s(57967),j=s.n(b),g=s(60509),w=s.n(g),k=s(82901),N=s.n(k),C=s(16480),S=s.n(C),O=s(79189),M=s(4338),D=s.n(M),E=s(91967),H=s(58924),I=s.n(H),F=s(81837),A=s(42256);function P(e){let{locations:t,metro:s,address:r}=e;return(0,v.jsxs)("div",{className:I().root,children:[(0,v.jsx)(A.Y,{text:r,location:"1",hotelsSelect:!0}),(0,v.jsx)(F.m,{textBefore:s.distance,metro:s.stations,hotelsSelect:!0}),(0,v.jsx)(A.Y,{className:I().location_2,text:`${t.distance} ${t.textBefore} ${t.text}`,location:"2",hotelsSelect:!0})]})}var z=s(43431);function L(e){let{title:t,locations:s,metro:r,address:l,amenities:a}=e;return(0,v.jsxs)("div",{className:D().root,children:[(0,v.jsx)(z.l,{title:t}),(0,v.jsx)(P,{locations:s,metro:r,address:l}),(0,v.jsx)(E.a,{className:D().amenities,amenities:a})]})}var R=s(29624),W=s(24843),$=s(2769),V=s(90683),B=s(8792),q=s(96403);function U(e){let{item:t,selectedHotelID:s,setSelectedCity:r,hoverHotelID:l,setHoverHotelID:a,setTopCard:n,queryParams:i,price:o}=e,c=(0,W.GS)($.Mq),[u,d]=y.useState(!1),_=l?l===t.id:s===t.id,h=y.useRef(null);return y.useEffect(()=>{if(!h||!h.current)return;let e=h.current.offsetTop;if(c&&s===t.id){n(e);return}l!==t.id||u||n(e),""===l&&s===t.id&&n(e)},[l,t.id,n,u,s,c]),(0,v.jsxs)(B.default,{className:S()(N().root,{[N().hover]:_}),onMouseEnter:()=>{a(t.id),r(t.city),d(!0)},onMouseLeave:()=>{a(""),d(!1)},href:i.length>0?`/hotels/${(0,q.r)(t.id)}/${V.D[t.id]}?${i}`:`/hotels/${(0,q.r)(t.id)}/${V.D[t.id]}`,ref:h,children:[(0,v.jsx)(O.l,{images:t.images.small,isActive:u}),(0,v.jsx)(L,{title:t.header,locations:t.landmarks.main,metro:t.metro,address:`${t.city}, ${t.address}`,amenities:t.services}),(0,v.jsx)(R.y,{isHover:_,price:o})]})}var G=s(86724),T=s.n(G);let Z=y.forwardRef((e,t)=>{let{children:s,className:r}=e;return(0,v.jsx)("div",{className:S()(T().root,r),ref:t,children:s})});function J(e){let{isOpenMapMobile:t,hotels:s,selectedHotelID:r,setSelectedCity:l,hoverHotelID:a,setHoverHotelID:n,queryParams:i,price:o}=e,c=(0,W.GS)($.Mq),u=y.useRef(null),[d,_]=y.useState(0);return y.useEffect(()=>{if(!c&&window.innerWidth<window.innerHeight&&r){window.scrollTo({top:d+300,behavior:"smooth"});return}if(c&&window&&!t&&r){window.scrollTo({top:d+260,behavior:"smooth"});return}u?.current?.scrollTo({top:d,behavior:"smooth"})},[d,u,c,t,r]),(0,v.jsxs)("div",{className:S()(w().root,{[w().map_active]:t}),children:[(0,v.jsx)(Z,{className:w().cards_wrapper,ref:u,children:s.map((e,t)=>(0,v.jsx)(U,{item:e,selectedHotelID:r,setSelectedCity:l,hoverHotelID:a,setHoverHotelID:n,setTopCard:_,queryParams:i,price:o[e.id]},t))}),(0,v.jsx)("div",{className:w().gradient})]})}Z.displayName="Scrollbar";var Y=s(46783),K=s.n(Y),X=s(52846);function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var ee=e=>X.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 13 13"},e),a||(a=X.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.667 8.77 8.259m0 0A4.5 4.5 0 1 0 2.23 2.075a4.5 4.5 0 0 0 6.538 6.184"}))),et=s(82700),es=s(68036);function er(e){let{openModal:t,filterTL:s,cityPage:r,selectedDate:l,selectedGuests:a}=e,n=y.useCallback(()=>{if(!s)return;let{guests:e}=s;switch(!0){case 1===e:return"гость";case 5===e:return"гостей";default:return"гостя"}},[s]),i=y.useCallback(()=>{if(s){let{date:e}=s,t=(0,et.WU)(e[0],"dd.MM"),r=(0,et.WU)(e[1],"dd.MM");return`${t} - ${r}`}},[s]);return(0,v.jsxs)("div",{className:K().root,children:[(0,v.jsx)("span",{className:K().title,children:"Наши отели"}),(0,v.jsxs)("div",{className:K().search,onClick:t,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:S()(K().city,{[K().center]:!s}),children:(()=>{if(s)return s.city;switch(r){case es.t.spb:return es.t.spb;case es.t.msk:return es.t.msk;default:return""}})()}),(0,v.jsx)("span",{className:K().date,children:i()}),s&&(0,v.jsxs)("span",{className:K().guests,children:[s.guests," ",n()]})]}),(0,v.jsx)(ee,{className:K().icon})]})]})}var el=s(11393),ea=s.n(el);function en(){return(en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var ei=e=>X.createElement("svg",en({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),n||(n=X.createElement("path",{stroke:"#8E99AF",strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 8.5v2m0 2v-2m2 0h2m-4 0h-9M5.5 7.5v-2m0-2v2m2 0h7m-9 0h-4"}))),eo=s(69889),ec=s.n(eo),eu=s(71857),ed=s(42241),e_=s.n(ed);function eh(e){let{className:t,name:s,isChecked:r,handleClickFilter:l}=e;return(0,v.jsxs)("div",{className:S()(e_().root,t),onClick:l(r,s),children:[(0,v.jsx)("span",{className:e_().text,children:s}),(0,v.jsx)("label",{children:(0,v.jsx)("input",{className:e_().checkbox,type:"checkbox",name:"agree",checked:r,onChange:()=>{}})})]})}function ep(e){let{title:t,items:s,selectedFilters:r,handleClickFilter:l,setOpenMobileFilters:a,isMSK:n}=e,i=(0,W.GS)($.Mq),[o,c]=y.useState(!1);return(0,v.jsxs)("div",{className:S()(ec().root,{[ec().msk]:n},{[ec().hover]:o}),onMouseLeave:()=>!i&&c(!1),onClick:()=>{i&&a({isOpen:!0,filterName:t})},children:[(0,v.jsxs)("div",{className:S()(ec().title,{[ec().hover]:o}),onMouseEnter:()=>!i&&c(!0),children:[(0,v.jsx)("span",{children:t}),(0,v.jsx)(eu.Z,{className:S()(ec().arrow,{[ec().hover]:o})})]}),(0,v.jsx)(Z,{className:S()(ec().items,{[ec().hover]:o}),children:s.map((e,t)=>(0,v.jsx)(eh,{name:e,isChecked:r.includes(e),handleClickFilter:l},t))})]})}var em=s(34109),ev=s(15361);(r=i||(i={})).stars="Звездность",r.food="Питание",r.metro="Метро",r.attractions="Знаковые места",r.railways="Вокзалы",r.streets="Улицы поблизости",r.beds="Мест в номере",r.kids="С детьми",r.pets="С питомцами",r.business="Командировка",r.transfer="Трансфер",r.amenities="В отеле",r.services="Услуги",(l=o||(o={})).checkbox="checkbox",l.switch="switch";let ey=[{title:"Звездность",type:"checkbox",items:[em.W.star3,em.W.star4]},{title:"Питание",type:"checkbox",items:["Завтрак","\xabШведский стол\xbb"]},{title:"Метро",type:"checkbox",items:["Адмиралтейская","Невский проспект / Гостиный двор","Площадь Ал. Невского / Площадь Ал. Невского","Площадь Восстания / Маяковская","Садовая / Сенная / Спасская","Чернышевская"]},{title:"Знаковые места",type:"checkbox",items:["Эрмитаж","Мариинский театр","Летний сад","Русский музей","Исаакиевский собор","Кунсткамера","Медный всадник","Казанский собор","Дворцовая площадь","Спас на Крови","Новая Голландия","Юсуповский дворец","Дворцовый мост","Музей Фаберже","Александринский театр","Михайловский замок","Анненкирхе","Смольный собор","Троицкий мост","Аничков мост","Пять углов","Мариинский концертный зал","Юсуповский сад","ТРЦ Галерея"]},{title:"Вокзалы",type:"checkbox",items:["Московский (Сапсан)","Балтийский (Петергоф)","Витебский (Пушкин, Павловск)","Финляндский (Выборг)"]},{title:"Улицы поблизости",type:"checkbox",items:["Невский проспект","Садовая","Рубинштейна","Пушкинская","Правды","Некрасова","Набережная Фонтанки","Марата","Литейный проспект","Лиговский проспект","Канал Грибоедова","Джона Леннона","Большая Морская","Синопская набережная"]},{title:"Мест в номере",type:"checkbox",items:["1","2","3","4"]},{title:"С детьми",type:"switch",items:["С детьми"]},{title:"С питомцами",type:"switch",items:["С питомцами"]},{title:"Командировка",type:"switch",items:["Командировка"]},{title:"Трансфер",type:"switch",items:["Трансфер"]},{title:"В отеле",type:"checkbox",items:["Wi-Fi","Телевизор","Сейф*","Рабочий стол*","Кухонная зона","Холодильник","Электрический чайник","Душ","Ванна*","Стиральная машина*","Прачечная","Фен","Кондиционер","Балкон*","Лифт","Парковка (ограничено)"],popUp:{item:"Парковка (ограничено)",text:`Парковочных мест ограниченное количество. Пожалуйста, бронируйте их заранее по телефону <br/><b><a href="tel:${(0,ev.mz)()}">${(0,ev.u_)()}</a></b>`}},{title:"Услуги",type:"checkbox",items:["Круглосуточное заселение","Круглосуточное обслуживание","Дополнительное спальное место","Детская кроватка","Доставка еды и напитков в номер","Хранение багажа","Экскурсии","Музеи"]}],ef=[{title:"Звездность",type:"checkbox",items:[em.W.star3]},{title:"Метро",type:"checkbox",items:["Комсомольская","Площадь трёх вокзалов","Курская","Красные ворота","Китай-город","Ленинградский вокзал","Таганская","Бауманская","Театральная","Чистые пруды"]},{title:"Вокзалы",type:"checkbox",items:["Казанский","Ленинградский","Ярославский","Курский"]},{title:"Знаковые места",type:"checkbox",items:["Красная площадь","Парк Зарядье","Московский Кремль","ВШЭ","Большой театр","Институт мозга","ЦУМ","Artplay","Нулевой километр","Дом Утюг","Дом-яйцо","Лобное место","Парящий мост"]},{title:"Улицы поблизости",type:"checkbox",items:["Большая Лубянка","Земляной Вал","Космодамианская набережная","Котельническая набережная","Моховая","Мясницкая","Петровка","Покровка","Проспект Мира","Рождественский бульвар","Садовое кольцо","Театральный проезд","Чистопрудный бульвар","Яуза"]},{title:"Мест в номере",type:"checkbox",items:["1","2"]},{title:"С детьми",type:"switch",items:["С детьми"]},{title:"С питомцами",type:"switch",items:["С питомцами"]},{title:"Командировка",type:"switch",items:["Командировка"]},{title:"Трансфер",type:"switch",items:["Трансфер"]},{title:"В отеле",type:"checkbox",items:["Wi-Fi","Телевизор","Сейф*","Кухонная зона","Холодильник","Электрический чайник","Душ","Прачечная","Фен","Парковка (ограничено)"],popUp:{item:"Парковка (ограничено)",text:`Парковочных мест ограниченное количество. Пожалуйста, бронируйте их заранее по телефону <b><a href="tel:${(0,ev.mz)()}">${(0,ev.u_)()}</a></b>`}},{title:"Услуги",type:"checkbox",items:["Круглосуточное заселение","Дополнительное спальное место","Экскурсии","Музеи"]}];function ex(e){let{openFilters:t,selectedFilters:s,handleClickFilter:r,setOpenMobileFilters:l,cityPage:a}=e,n=[i.stars,i.food,i.metro,i.attractions].map(e=>ey.find(t=>t.title===e)).filter(Boolean),o=[i.stars,i.metro,i.railways,i.attractions].map(e=>ef.find(t=>t.title===e)).filter(Boolean),c=a===es.t.msk,u=c?o:n;return(0,v.jsx)("div",{className:ea().root,children:(0,v.jsxs)("div",{className:ea().wrapper,children:[(0,v.jsxs)("div",{className:ea().all_filters_button,onClick:t,role:"button",children:[(0,v.jsx)(ei,{}),(0,v.jsx)("span",{children:"Все фильтры"})]}),(0,v.jsx)("div",{className:ea().filters,children:u.map((e,t)=>{if(e)return(0,v.jsx)(ep,{title:e.title,items:e.items,selectedFilters:s,handleClickFilter:r,setOpenMobileFilters:l,isMSK:c},t)})})]})})}var eb=s(60892),ej=s.n(eb);function eg(e){let{selectedFilters:t,removeFilter:s,clearFilters:r,amount:l}=e;return(0,v.jsxs)("div",{className:ej().root,children:[(0,v.jsxs)("span",{className:ej().title,children:["Есть ",l," подходящих вариантов:"]}),t.length>0&&(0,v.jsxs)("div",{className:ej().filters_wrapper,children:[(0,v.jsx)("span",{className:ej().selected_title,children:"Выбранные фильтры:"}),t.map((e,t)=>(0,v.jsx)("span",{className:ej().filter,onClick:s(e),children:e},t)),(0,v.jsx)("span",{className:ej().filter,onClick:r,children:"Сбросить"})]})]})}var ew=s(74898),ek=s(81937),eN=s(91439),eC=s(20339);let eS="Апарт-отели 3* и 4* в Санкт-Петербурге и Москве в центре",eO="АПАРТ-ОТЕЛИ 3* И 4* В ЦЕНТРЕ В САНКТ-ПЕТЕРБУРГЕ",eM="АПАРТ-ОТЕЛИ 3* В ЦЕНТРЕ В МОСКВЕ";function eD(e){let{hotels:t,filterTL:s,isOpenFilters:r,openFilters:l,selectedFilters:a,removeFilter:n,clearFilters:i,handleClickFilter:o,selectedHotelID:c,setHoverHotelID:u,setSelectedCity:d,hoverHotelID:_,openModal:h,isOpenMapMobile:p,handleOpenMapMobile:m,queryParams:f,cityPage:x,selectedDate:b,selectedGuests:g,price:w}=e,[k,N]=y.useState({isOpen:!1,filterName:""}),C=(x===es.t.msk?ef:ey).find(e=>e.title===k.filterName),O=y.useCallback(()=>{window&&!p&&window.scrollTo(0,0),m()},[p,m]),M=y.useCallback(()=>{if(s)switch(s.city){case es.t.spb:return eO;case es.t.msk:return eM;default:return eS}switch(x){case es.t.spb:return eO;case es.t.msk:return eM;default:return eS}},[x,s]);return(0,v.jsxs)("div",{className:S()(j().root,{[j().map_active]:p},{[j().filters_active]:r}),children:[(0,v.jsx)("h1",{className:j().title,children:M()}),(0,v.jsx)(er,{openModal:h,filterTL:s,cityPage:x,selectedDate:b,selectedGuests:g}),(0,v.jsx)(ex,{openFilters:l,selectedFilters:a,handleClickFilter:o,setOpenMobileFilters:N,cityPage:x}),(0,v.jsx)(eg,{selectedFilters:a,removeFilter:n,clearFilters:i,amount:t?t.length:0}),t&&(0,v.jsx)(J,{isOpenMapMobile:p,hotels:t,selectedHotelID:c,setSelectedCity:d,hoverHotelID:_,setHoverHotelID:u,queryParams:f,price:w}),(0,v.jsx)(eN.u,{isOpen:k.isOpen,close:()=>N({isOpen:!1,filterName:""}),mobileCloseIcon:!1,opacityBG:.3,children:(0,v.jsxs)("div",{className:j().mobile_filters_wrapper,children:[(0,v.jsx)(eC.P,{className:j().close,close:()=>N({isOpen:!1,filterName:""})}),(0,v.jsx)("div",{className:j().mobile_filters,children:C&&C.items.map((e,t)=>(0,v.jsx)(eh,{name:e,isChecked:a.includes(e),handleClickFilter:o},t))}),(0,v.jsx)(ew.z,{green:!0,className:j().button,onClick:()=>N({isOpen:!1,filterName:""}),children:"Готово"})]})}),(0,v.jsxs)(ew.z,{className:S()(j().mobile_button,{[j().map_active]:p}),onClick:O,xl:!0,purpleGradient:!0,children:[p&&(0,v.jsx)(ek.Z,{}),p?"К списоку отелей ":"На карте"]})]})}var eE=s(65853),eH=s.n(eE),eI=s(92522),eF=s(86743),eA=s.n(eF),eP=s(34040),ez=s(10087),eL=s(84402);function eR(e){let{item:t,ymapRef:s,selectedHotelID:r,setSelectedHotelID:l,hoverHotelID:a,setHoverHotelID:n,queryParams:i,price:o}=e,[c,u]=y.useState(),[d,_]=y.useState(!1),h=(0,W.GS)($.Mq),p=(0,W.GS)($.ai),{id:m,header:f,coordinates:x,address:b,images:j,stars:g}=t,w=a?a===m:d,k=w?3:g===em.W.star4?3:2,N=y.useCallback(()=>{if(p)switch(!0){case m===eL.h.ligovskiy:return[[0,0],[165,23]];case m===eL.h.sennaya:return[[0,0],[195,23]];case m===eL.h.gostiniyDvor:return[[0,0],[205,23]];case m===eL.h.moyka:return[[0,0],[148,23]];case m===eL.h.smolnyy:return[[0,0],[159,23]];case m===eL.h.nevskiy:return[[0,0],[175,23]];case m===eL.h.griboedov:return[[0,0],[187,23]];case m===eL.h.pokrovka:return[[0,0],[166,23]];case m===eL.h.mariinsky:default:return[[0,0],[175,23]]}switch(!0){case m===eL.h.ligovskiy:return[[0,0],[272,40]];case m===eL.h.sennaya:return[[0,0],[319,40]];case m===eL.h.gostiniyDvor:return[[0,0],[336,40]];case m===eL.h.moyka:return[[0,0],[246,40]];case m===eL.h.smolnyy:return[[0,0],[264,40]];case m===eL.h.nevskiy:return[[0,0],[289,40]];case m===eL.h.griboedov:return[[0,0],[308,40]];case m===eL.h.pokrovka:return[[0,0],[301,40]];case m===eL.h.mariinsky:default:return[[0,0],[281,40]]}},[m,p]),C=y.useCallback(()=>{let e=document.getElementsByClassName("ymaps-2-1-79-balloon")[0],t=eP.createRoot(document.getElementById("balloon-content"));(e||t)&&(e.classList.add("hotels_balloon"),t.render((0,v.jsx)(ez.y,{title:f,address:b,slides:j.small,queryParams:i,id:m,price:o})))},[b,j,f,i,m,o]),S=y.useCallback(()=>{C(),l(m),_(!0)},[m,l,C]),O=y.useCallback(()=>{_(!1),l("")},[l]);y.useEffect(()=>{c&&m===r&&c.balloon.close()},[i,c]);let M=s.templateLayoutFactory.createClass(`<div class="placemark_hotel">
                                <h2 class="placemark_hotel_header"><b>${f}</b></h2>
                                <div class="placemark_hotel_arrow"/>
                            </div>
                        `,{build:function(){M.superclass.build.call(this);let e=this.getParentElement().getElementsByClassName("placemark_hotel")[0];e.style.position="relative",e.style.fontSize=p?"1rem":"1.6rem",e.style.textTransform="uppercase",e.style.padding=p?"0.5rem 1rem":"1rem 2rem",e.style.borderRadius="1.8rem",e.style.background=w?"#1D5377":'url("/images/map/placemarkIcon.png") no-repeat',e.style.backgroundPosition=p?"3.5rem top":"3rem top",e.style.backgroundSize="contain",e.style.width="fit-content",e.style.whiteSpace="nowrap",e.style.color=w?"white":"#424753",e.style.height=w?"unset":p?"3rem":"5.5rem",this.getParentElement().getElementsByClassName("placemark_hotel_header")[0].style.opacity=w?"1":"0";let t=this.getParentElement().getElementsByClassName("placemark_hotel_arrow")[0];t.style.display=w?"unset":"none",t.style.position="absolute",t.style.width=p?"1rem":"2rem",t.style.height=p?"1rem":"2rem",t.style.transform="rotate(45deg)",t.style.background=w?"#1D5377":"white",t.style.zIndex="-1",t.style.bottom=p?"-0.5rem":"-1rem",t.style.left="4rem",this.getData().geoObject.events.add("mouseenter",()=>{a!==m&&n(m)}),this.getData().geoObject.events.add("mouseleave",()=>{n("")})}});return(0,v.jsx)(eI.ah,{geometry:x,properties:{balloonContent:'<div class="hotels_page_balloon_content" id="balloon-content"></div>'},options:{balloonMaxWidth:359,balloonMaxHeight:359,balloonPanelMaxMapArea:h?1/0:0,balloonAutoPan:!h,iconLayout:M,iconShape:{type:"Rectangle",coordinates:w?N():p?[[30,0],[70,23]]:[[30,0],[70,40]]},iconOffset:[-50,-50],zIndex:k,hideIconOnBalloonOpen:!1,balloonOffset:[0,-30]},modules:["geoObject.addon.balloon","geoObject.addon.hint"],onBalloonOpen:S,onBalloonClose:O,instanceRef:e=>u(e)})}s(92937);var eW=s(94701),e$=s.n(eW);function eV(e){let{className:t,children:s,instanceRef:r,disable:l=!1}=e,a=(0,W.GS)($.Mq),[n,i]=y.useState(!a),o=y.useCallback(e=>2===e.touches.length?i(!0):i(!1),[]);return y.useEffect(()=>{!l&&a&&r&&(n?r.behaviors.enable("drag"):r.behaviors.disable("drag"))},[a,n,r,l]),(0,v.jsx)("div",{className:S()(e$().root,t),onTouchStart:e=>o(e),children:s})}var eB=s(14199);function eq(e){let{hotels:t,selectedHotelID:s,setSelectedHotelID:r,city:l,isOpenMapMobile:a,hoverHotelID:n,setHoverHotelID:i,queryParams:o,price:c}=e,u=(0,W.GS)($.ai),d=(0,W.GS)($.Mq),_=(0,W.GS)($.PJ),[h,p]=y.useState(),[m,f]=y.useState(),x=!d||d&&a,b=y.useCallback(e=>{switch(!0){case u&&e===es.t.spb:return[59.936644,30.335868];case u&&e===es.t.msk:return[55.77,37.629824];case d&&e===es.t.spb:return[59.93,30.336];case d&&e===es.t.msk:return[55.762816,37.639824];case _&&e===es.t.spb:return[59.94,30.336];case _&&e===es.t.msk:return[55.762816,37.639824];default:if(e===es.t.spb)return[59.94,30.35];if(e===es.t.msk)return[55.762816,37.639824]}return[0,0]},[_,u,d]);return y.useEffect(()=>{m?.setCenter(b(l)).then()},[l,d,u,b,m]),(0,v.jsx)("div",{className:eA().root,children:(0,v.jsx)(eI.Yy,{query:{apikey:"497feeb6-dc95-47ca-b1c3-75a4c310c9b7"},children:(0,v.jsx)(eV,{instanceRef:m,disable:d,children:x?(0,v.jsxs)(eI.D5,{width:"100%",height:"100%",defaultState:{center:b(l),zoom:u?12:13},instanceRef:e=>{e&&(e.behaviors.disable("scrollZoom"),f(e))},options:{yandexMapDisablePoiInteractivity:!0,suppressMapOpenBlock:!0,copyrightLogoVisible:!1,copyrightProvidersVisible:!1,copyrightUaVisible:!1},onLoad:e=>p(e),modules:["templateLayoutFactory","layout.ImageWithContent"],children:[!d&&(0,v.jsx)(eI.Ly,{options:{position:{right:27,bottom:360},size:"small"}}),t.map((e,t)=>{if(h)return(0,v.jsx)(eR,{item:e,ymapRef:h,selectedHotelID:s,setSelectedHotelID:r,hoverHotelID:n,setHoverHotelID:i,queryParams:o,price:c},t)}),(0,v.jsx)(eB.m,{ymapRef:h,instanceRef:m})]}):(0,v.jsx)(v.Fragment,{})})})})}function eU(e){let{hotels:t,selectedHotelID:s,setSelectedHotelID:r,isOpenMapMobile:l,city:a,hoverHotelID:n,setHoverHotelID:i,queryParams:o,price:c}=e;return(0,v.jsxs)("div",{className:S()(eH().root,{[eH().active]:l}),children:[(0,v.jsx)(eq,{hotels:t,selectedHotelID:s,setSelectedHotelID:r,city:a,isOpenMapMobile:l,hoverHotelID:n,setHoverHotelID:i,queryParams:o,price:c}),(0,v.jsx)("div",{className:S()(eH().gradient,{[eH().active]:l})})]})}let eG=(e,t)=>{switch(!0){case e===em.W.star3:return t.filter(e=>e!==em.W.star4);case e===em.W.star4:return t.filter(e=>e!==em.W.star3);default:return t}},eT=(e,t)=>{switch(!0){case"1"===e:return t.filter(e=>"2"!==e&&"3"!==e&&"4"!==e);case"2"===e:return t.filter(e=>"1"!==e&&"3"!==e&&"4"!==e);case"3"===e:return t.filter(e=>"2"!==e&&"1"!==e&&"4"!==e);case"4"===e:return t.filter(e=>"2"!==e&&"3"!==e&&"1"!==e);default:return t}},eZ=(e,t)=>e===em.W.star3||e===em.W.star4?eG(e,t):"1"===e||"2"===e||"3"===e||"4"===e?eT(e,t):t,eJ=()=>{let[e,t]=y.useState([]),s=y.useCallback(e=>()=>{t(t=>[...eZ(e,t),e])},[]),r=y.useCallback(e=>()=>{t(t=>t.filter(t=>t!==e))},[]),l=y.useCallback(()=>{t([])},[]),a=y.useCallback((e,t)=>()=>{e?r(t)():s(t)()},[s,r]);return{selectedFilters:e,removeFilter:r,clearFilters:l,handleClickFilter:a}};var eY=s(24032),eK=s.n(eY),eX=s(78577),eQ=s.n(eX),e0=s(6323),e1=s.n(e0);function e5(e){let{isActive:t,setIsActive:s,setValue:r,items:l}=e,a=y.useCallback(e=>()=>{r(e)(),s(!1)},[s,r]);return(0,v.jsx)("div",{className:S()(e1().root,{[e1().active]:t}),children:(0,v.jsx)("ul",{children:l.map((e,t)=>(0,v.jsx)("li",{onClick:a(e),children:e},t))})})}function e2(){return(e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var e4=e=>X.createElement("svg",e2({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 21 23"},e),c||(c=X.createElement("path",{fill:"#8E99AF",fillRule:"evenodd",d:"M7 .667a.5.5 0 0 0-1 0v1.25H2.25a1.5 1.5 0 0 0-1.5 1.5v17.25a1.5 1.5 0 0 0 1.5 1.5H19.5a1.5 1.5 0 0 0 1.5-1.5V3.417a1.5 1.5 0 0 0-1.5-1.5h-3.75V.667a.5.5 0 0 0-1 0v1.25H7zm13 6.5v-3.75a.5.5 0 0 0-.5-.5h-3.75v1.25a.5.5 0 0 1-1 0v-1.25H7v1.25a.5.5 0 0 1-1 0v-1.25H2.25a.5.5 0 0 0-.5.5v3.75zm-18.25 1H20v12.5a.5.5 0 0 1-.5.5H2.25a.5.5 0 0 1-.5-.5zm2.5 3a.5.5 0 0 1 .5-.5H6.5a.5.5 0 0 1 0 1H4.75a.5.5 0 0 1-.5-.5m5.25 0a.5.5 0 0 1 .5-.5h1.75a.5.5 0 0 1 0 1H10a.5.5 0 0 1-.5-.5m5.25 0a.5.5 0 0 1 .5-.5H17a.5.5 0 0 1 0 1h-1.75a.5.5 0 0 1-.5-.5m-10.5 5.25a.5.5 0 0 1 .5-.5H6.5a.5.5 0 0 1 0 1H4.75a.5.5 0 0 1-.5-.5m5.25 0a.5.5 0 0 1 .5-.5h1.75a.5.5 0 0 1 0 1H10a.5.5 0 0 1-.5-.5",clipRule:"evenodd"}))),e3=s(29703),e9=s.n(e3),e7=s(83441),e6=s.n(e7),e8=s(49740);s(23613),s(42413);var te=s(39422),tt=s(3251),ts=s(39291),tr=s(43328),tl=s(39315),ta=s(30666);function tn(e){let{isActive:t,setIsActive:s,value:r,setValue:l}=e,[a,n]=y.useState(r),[i,o]=y.useState(0),[c,u]=a,d=y.useRef(null),_=e=>{if(a[0]&&!a[1]){let t=(0,te.j)(e,a[0]);if(!(t<1)){o(t);return}}};y.useEffect(()=>{let e=setTimeout(()=>{let e=d.current?.querySelectorAll(".react-datepicker__day--in-range");e&&e.length>0&&(e[0].classList.add("first-in-range"),e[e.length-1].classList.add("last-in-range"))},0);return()=>clearTimeout(e)},[c,u]);let h=y.useCallback(e=>{let t=e%10,s=e%100;return 1===t&&11!==s?"ночь":t>=2&&t<=4&&(s<12||s>14)?"ночи":"ночей"},[]),p=i?`Заезд ${(0,et.WU)(a[0],"dd MMMM",{locale:e8.Z})} - Выезд ${(0,et.WU)((0,tt.E)(a[0],i),"dd MMMM",{locale:e8.Z})} (${i} ${h(i)})`:"Выберите дату заезда",m=e=>(0,ts._)(e)===(0,tr.N)(e);return(0,v.jsx)("div",{className:S()(e9().root,{[e9().active]:t}),ref:d,children:(0,v.jsxs)("div",{className:"datepicker_wrapper_hotels",children:[(0,v.jsx)(e6(),{locale:"ru",inline:!0,selectsRange:!0,onSelect:()=>{},minDate:new Date,maxDate:(0,tl.z)((0,ta.V)(new Date),10),calendarStartDay:1,monthsShown:2,startDate:a[0],endDate:a[1],onChange:e=>{n(e),e[1]&&(l(e)(),s(!1))},showDisabledMonthNavigation:!0,onDayMouseEnter:e=>_(e),dayClassName:e=>m(e)?"last_day_of_month":""}),(0,v.jsxs)("div",{className:e9().bottom,children:[(0,v.jsx)("span",{children:p}),(0,v.jsx)("span",{children:"Лучшие цены для 1 гостя за ночь "}),(0,v.jsx)("span",{children:"Цена может быть доступна при соблюдении специальных условий бронирования"})]})]})})}function ti(){return(ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}(0,e7.registerLocale)("ru",e8.Z);var to=e=>X.createElement("svg",ti({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 25"},e),u||(u=X.createElement("path",{fill:"#8E99AF",d:"m17.834 13.8.323-.381zm-11.668 0 .324.381zm14.584 4.95c0-2.018-.945-3.933-2.593-5.331l-.647.762c1.447 1.228 2.24 2.874 2.24 4.569zm-1 0v1.5h1v-1.5zm-1.5 3H5.75v1h12.5zm-14-1.5v-1.5h-1v1.5zm1.593-6.831C4.196 14.817 3.25 16.732 3.25 18.75h1c0-1.695.793-3.34 2.24-4.568zM12 11.25c-2.297 0-4.512.773-6.157 2.169l.647.762c1.45-1.23 3.43-1.931 5.51-1.931zm6.157 2.169c-1.645-1.396-3.86-2.169-6.157-2.169v1c2.08 0 4.06.702 5.51 1.931zM5.75 21.75a1.5 1.5 0 0 1-1.5-1.5h-1a2.5 2.5 0 0 0 2.5 2.5zm14-1.5a1.5 1.5 0 0 1-1.5 1.5v1a2.5 2.5 0 0 0 2.5-2.5z"})),d||(d=X.createElement("circle",{cx:12,cy:7.25,r:4.5,stroke:"#8E99AF"}))),tc=s(6582),tu=s.n(tc),td=s(46702),t_=s.n(td);function th(){return(th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var tp=e=>X.createElement("svg",th({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 13 3"},e),_||(_=X.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 1.5h11"})));function tm(){return(tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var tv=e=>X.createElement("svg",tm({xmlns:"http://www.w3.org/2000/svg",width:12,height:11,fill:"none"},e),h||(h=X.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 1v9M1 5.5h10"})));function ty(e){let{title:t,value:s,setValue:r,prevDisable:l,nextDisable:a}=e,n=y.useCallback(()=>{r(s-1)()},[r,s]),i=y.useCallback(()=>{r(s+1)()},[r,s]);return(0,v.jsxs)("div",{className:t_().counter_wrapper,children:[(0,v.jsx)("span",{className:t_().title,children:t}),(0,v.jsxs)("div",{className:t_().counter,children:[(0,v.jsx)("div",{className:S()(t_().counter_button,{[t_().disable]:l}),onClick:n,role:"button",children:(0,v.jsx)(tp,{className:t_().counter_icon})}),(0,v.jsx)("span",{children:s}),(0,v.jsx)("div",{className:S()(t_().counter_button,{[t_().disable]:a}),onClick:i,role:"button",children:(0,v.jsx)(tv,{className:t_().counter_icon})})]})]})}var tf=s(23588),tx=s.n(tf);let tb=["до 1 года","1 год","2 года","3 года","4 года","5 лет"];function tj(e){let{number:t,value:s,setValue:r,isValid:l}=e;return(0,v.jsxs)("div",{className:tx().root,children:[(0,v.jsxs)("span",{children:["Возраст ",t,"-ого ребенка"]}),(0,v.jsxs)("select",{name:"age",id:"age",onChange:r(t-1),className:S()({[tx().valid]:!s&&l}),children:[!s&&(0,v.jsx)("option",{value:"",disabled:!0,selected:!0,className:tx().disabled,children:"Выбрать"}),tb.map((e,t)=>(0,v.jsx)("option",{value:t,selected:t===s,children:e},t))]})]})}function tg(e){let{isActive:t,setIsActive:s,setValue:r,value:l}=e,[a,n]=y.useState(!1),[i,o]=y.useState(l),c=y.useCallback(e=>()=>{i.adult>=4&&e>i.adult||i.adult<=1&&e<i.adult||i.sum>=5&&e>i.adult||o(t=>({...t,adult:e,sum:t.children+e}))},[i]),u=y.useCallback(e=>()=>{if(i.children<=0&&e<i.children||i.sum>=5&&e>i.children)return;if(e<i.children)return o(t=>{let s=i.childrenAge.filter((t,s)=>s!==e);return{...t,children:e,sum:t.adult+e,childrenAge:s}});let t=[...i.childrenAge,null];o(s=>({...s,children:e,sum:s.adult+e,childrenAge:t})),n(!1)},[i]),d=y.useCallback(e=>t=>{o(s=>{let r=[...s.childrenAge];return r[e]=Number(t.target.value),{...s,childrenAge:r}})},[]),_=i.adult<=1,h=i.adult>=4||i.sum>=5,p=i.children<=0,m=i.sum>=5;return(0,v.jsxs)("div",{className:S()(tu().root,{[tu().active]:t}),children:[(0,v.jsx)("span",{className:tu().title,children:"Гости"}),(0,v.jsxs)("div",{className:tu().counters_wrapper,children:[(0,v.jsx)(ty,{title:"Взрослые",value:i.adult,setValue:c,prevDisable:_,nextDisable:h}),(0,v.jsx)(ty,{title:"Дети младше 6 лет",value:i.children,setValue:u,prevDisable:p,nextDisable:m})]}),(0,v.jsxs)("div",{className:tu().bottom,children:[(0,v.jsx)("div",{children:Array.from({length:i.children}).map((e,t)=>(0,v.jsx)(tj,{number:t+1,value:i.childrenAge[t],setValue:d,isValid:a},t))}),(0,v.jsx)(ew.z,{className:tu().button,green:!0,onClick:()=>{if(i.childrenAge.includes(null)){n(!0);return}r(i),s(!1)},children:"Готово"})]})]})}var tw=s(44110),tk=s.n(tw);function tN(e){let{title:t,value:s,isActive:r,setIsActive:l,icon:a}=e;return(0,v.jsxs)("div",{className:S()(tk().root,{[tk().active]:r}),onClick:()=>l(e=>!e),children:[(0,v.jsx)("span",{className:S()(tk().title,tk().string),children:t}),(0,v.jsx)("span",{className:S()(tk().value,tk().string),children:s}),a]})}function tC(e){let{title:t,value:s,setValue:r,list:l,date:a,guests:n}=e,[i,o]=y.useState(!1),c=y.useRef(null),u=y.useCallback(()=>{switch(!0){case l:return(0,v.jsx)(eu.Z,{className:S()(eQ().icon,eQ().arrow,{[eQ().active]:i})});case a:return(0,v.jsx)(e4,{className:S()(eQ().icon)});case n:return(0,v.jsx)(to,{className:S()(eQ().icon)});default:return null}},[l,a,n,i]);y.useEffect(()=>{if(document&&i){let e=e=>{c.current&&(e.target===c.current||c.current.contains(e.target))||e.target.classList.contains("react-datepicker__day")||o(!1)};return document.addEventListener("click",t=>e(t)),()=>document.removeEventListener("click",t=>e(t))}},[i]);let d=l?s:s[0];return(0,v.jsxs)("div",{className:eQ().root,ref:c,children:[(0,v.jsx)(tN,{title:t,value:d,isActive:i,setIsActive:o,icon:u()}),l&&(0,v.jsx)(e5,{isActive:i,setIsActive:o,setValue:r,items:[es.t.spb,es.t.msk]}),a&&(0,v.jsx)(tn,{isActive:i,setIsActive:o,value:s[1],setValue:r}),n&&(0,v.jsx)(tg,{isActive:i,setIsActive:o,setValue:r,value:s[1]})]})}var tS=s(47907);function tO(e){let{closeModal:t,setTlFilter:s,selectedCity:r,setSelectedCity:l,selectedDate:a,setSelectedDate:n,selectedGuests:i,setSelectedGuests:o}=e,c=y.useCallback(e=>()=>{l(e)},[l]),u=y.useCallback(e=>()=>{n(e)},[n]),d=(0,et.WU)(a[0],"dd.MM.yyyy"),_=(0,et.WU)(a[1],"dd.MM.yyyy"),h=[{title:"Город",value:r,setValue:c,list:!0,date:!1,guests:!1},{title:"Дата заезда-выезда",value:[`${d} - ${_}`,a],setValue:u,list:!1,date:!0,guests:!1},{title:"Гости",value:[`${i.adult}  ${i.adult>1?"взрослых":"взрослый"},  ${i.children} ${1===i.children?"ребенок":"детей"}`,i],setValue:o,list:!1,date:!1,guests:!0}],p=(0,tS.usePathname)(),m=y.useCallback(()=>{if(r===es.t.msk){let e="/hotels/msk/";p!==e&&window.history.replaceState(null,"",e)}if(r===es.t.spb){let e="/hotels/spb/";p!==e&&window.history.replaceState(null,"",e)}s(),t()},[t,s,r,p]);return(0,v.jsxs)("div",{className:eK().root,children:[(0,v.jsx)("span",{className:eK().title,children:"Изменить поиск:"}),(0,v.jsx)(eC.P,{close:t,className:eK().close_button}),(0,v.jsx)("div",{className:eK().inputs_wrapper,children:h.map((e,t)=>{let{title:s,value:r,setValue:l,list:a,date:n,guests:i}=e;return(0,v.jsx)(tC,{title:s,value:r,setValue:l,list:a,date:n,guests:i},t)})}),(0,v.jsx)(ew.z,{className:eK().button,purple:!0,xl:!0,onClick:m,children:"Искать"})]})}var tM=s(68670),tD=s.n(tM),tE=s(58165),tH=s(96131),tI=s.n(tH),tF=s(2441),tA=s.n(tF);function tP(e){let{value:t,isChecked:s,handleClickFilter:r}=e;return(0,v.jsx)("div",{className:S()(tA().root,{[tA().active]:s}),onClick:r(s,t),role:"switch","aria-checked":s,children:(0,v.jsx)("div",{className:S()(tA().toggle,{[tA().active]:s})})})}var tz=s(55014),tL=s.n(tz);function tR(e){let{title:t,className:s}=e;return(0,v.jsx)("span",{className:S()(tL().root,s),children:t})}function tW(e){let{title:t,selectedFilters:s,handleClickFilter:r}=e;return(0,v.jsxs)("div",{className:tI().root,children:[(0,v.jsx)(tR,{title:t}),(0,v.jsxs)("div",{className:tI().wrapper,children:[(0,v.jsx)(tP,{value:t,isChecked:s.includes(t),handleClickFilter:r}),(0,v.jsx)("span",{children:"Да"})]})]})}var t$=s(41922),tV=s.n(t$);function tB(e){let{children:t}=e,[s,r]=y.useState(!1),l=(0,W.GS)($.ai),a=t?.props?.items?.length>5;return(0,v.jsxs)("div",{className:tV().root,children:[(0,v.jsx)("div",{className:S()(tV().wrapper,{[tV().active]:s}),children:t}),a&&l&&(0,v.jsxs)("span",{className:tV().button,role:"button",onClick:()=>r(e=>!e),children:[s?"Скрыть":"Показать еще",(0,v.jsx)(ek.Z,{className:S()(tV().arrow,{[tV().active]:s})})]})]})}var tq=s(27604),tU=s.n(tq);function tG(){return(tG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var tT=e=>X.createElement("svg",tG({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 15 15"},e),p||(p=X.createElement("path",{fill:"#CDD2DE",d:"M7.5 0a7.5 7.5 0 1 0 0 15 7.5 7.5 0 0 0 0-15"})),m||(m=X.createElement("path",{fill:"#fff",d:"M6.68 6h1.3v5h-1.3zm-.19-1.41a.65.65 0 0 1 .21-.49q.22-.21.6-.21t.61.21q.24.2.24.49t-.24.49q-.23.19-.61.19t-.6-.19a.65.65 0 0 1-.21-.49"})));function tZ(e){let{title:t,items:s,popUp:r,selectedFilters:l,handleClickFilter:a}=e,[n,o]=y.useState(!1);return(0,v.jsxs)("div",{className:tU().root,children:[(0,v.jsx)(tR,{title:t}),s&&s.map((e,t)=>(0,v.jsxs)("div",{className:tU().wrapper,children:[(0,v.jsx)(eh,{name:e,isChecked:l.includes(e),handleClickFilter:a}),r&&r.item===e&&(0,v.jsxs)("div",{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:()=>o(e=>!e),children:[(0,v.jsx)(tT,{className:tU().icon}),(0,v.jsx)("p",{className:S()(tU().pop_up,{[tU().active]:n}),dangerouslySetInnerHTML:{__html:r.text}})]})]},t)),t===i.amenities&&(0,v.jsx)("span",{className:tU().footnote,children:"*Не во всех номерах"})]})}var tJ=s(94889),tY=s.n(tJ);function tK(e){let{clearFilters:t,close:s}=e;return(0,v.jsxs)("div",{className:tY().root,children:[(0,v.jsx)(ew.z,{className:tY().clear,onClick:t,children:(0,v.jsx)("span",{children:"Сбросить все"})}),(0,v.jsx)(ew.z,{className:tY().apply,onClick:s,green:!0,xl:!0,children:"Применить"})]})}function tX(e){let{isOpen:t,close:s,clearFilters:r,selectedFilters:l,handleClickFilter:a,cityPage:n}=e,i=n===es.t.msk?ef:ey;return(0,v.jsx)("div",{className:S()(tD().root,{[tD().active]:t}),children:(0,v.jsxs)("div",{className:tD().wrapper,children:[(0,v.jsx)(eC.P,{close:s,className:tD().close}),(0,v.jsx)("div",{className:tD().tags,children:i[0].items?.map((e,t)=>v.jsx(tE.v,{name:e,isChecked:l.includes(e),handleClickFilter:a},t))}),(0,v.jsx)(Z,{className:tD().filters,children:(0,v.jsx)("div",{className:tD().filters_wrapper,children:i.map((e,t)=>{let{title:s,type:r,items:n,popUp:i}=e;if(!(t<1)){if(r===o.checkbox)return(0,v.jsx)(tB,{children:(0,v.jsx)(tZ,{title:s,items:n,popUp:i,selectedFilters:l,handleClickFilter:a},t)},t);if(r===o.switch)return(0,v.jsx)(tB,{children:(0,v.jsx)(tW,{title:s,selectedFilters:l,handleClickFilter:a})},t)}})})}),(0,v.jsx)(tK,{clearFilters:r,close:s})]})})}let tQ=()=>{let[e,t]=y.useState(!1),[s,r]=y.useState(!1),[l,a]=y.useState(!1),n=y.useCallback(()=>{t(!0)},[]),i=y.useCallback(()=>{t(!1)},[]);return{isOpenModal:e,isOpenFilters:s,isOpenMapMobile:l,openModal:n,closeModal:i,openFilters:y.useCallback(()=>{r(!0)},[]),closeFilters:y.useCallback(()=>{r(!1)},[]),handleOpenMapMobile:y.useCallback(()=>{a(e=>(document&&(document.body.style.overflowY=e?"auto":"hidden"),!e))},[])}};var t0=function(e){let[t,s]=(0,y.useState)(()=>{try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){console.error("Failed to retrieve item from Local Storage:",e)}return null});return(0,y.useEffect)(()=>{try{null!==t?window.localStorage.setItem(e,JSON.stringify(t)):window.localStorage.removeItem(e)}catch(e){console.error("Failed to set item in Local Storage:",e)}},[e,t]),[t,s]};let t1=e=>{let[t,s]=y.useState(null),[r,l]=y.useState(""),a=new Date,n=(0,tt.E)(a,1),[i,o]=y.useState(e),[c,u]=y.useState([a,n]),[d,_]=y.useState({adult:2,children:0,sum:2,childrenAge:[]}),h=y.useCallback(()=>{s({city:i,date:[(0,et.WU)(c[0],"yyyy-MM-dd"),(0,et.WU)(c[1],"yyyy-MM-dd")],guests:d.sum,adult:d.adult,children:d.children,childrenAge:d.childrenAge})},[i,c,d.adult,d.children,d.childrenAge,d.sum,s]);y.useEffect(()=>{if(!t)return;let e={date:t?.date[0],nights:(0,te.j)(t?.date[1],t?.date[0]).toString(),adults:t?.adult.toString(),"children-age":t.childrenAge.join(";")};l(new URLSearchParams(e).toString())},[t]);let[p]=t0("tl-guests"),[m]=t0("tl-arrivalDate"),[v]=t0("tl-nights");return y.useEffect(()=>{if(!p||!m||!v)return;let e=p&&JSON.parse(p.value),t=e&&e[0].adults,s=e&&e[0].children;_({adult:t||2,children:s?s.length:0,sum:s&&t?t+s.length:2,childrenAge:s||[]});let r=new Date(m.value),l=(0,tt.E)(r,v.value);u([r,l])},[p,m,v]),{filterTL:t,setTlFilter:h,selectedCity:i,setSelectedCity:o,selectedDate:c,setSelectedDate:u,selectedGuests:d,setSelectedGuests:_,queryParams:r}};async function t5(e,t,s,r,l){try{let a=await fetch("/getPrice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start_date:e,end_date:t,max_nights:s,guests:r,room_types:l})});if(!a.ok)throw Error(`Failed to fetch price. Status: ${a.status}`);return await a.json()}catch(e){throw console.error("Error fetching price:",e),e}}function t2(e){let{city:t,hotels:s}=e;t=t||es.t.spb;let r=(0,W.GS)($.ai),[l,a]=y.useState(null),[n,i]=y.useState(""),[o,c]=y.useState(""),[u,d]=y.useState({}),[_,h]=y.useState({}),{isOpenModal:p,isOpenFilters:m,isOpenMapMobile:f,openModal:b,closeModal:j,openFilters:g,closeFilters:w,handleOpenMapMobile:k}=tQ(),{selectedFilters:N,removeFilter:C,clearFilters:S,handleClickFilter:O}=eJ(),{filterTL:M,setTlFilter:D,selectedCity:E,setSelectedCity:H,selectedDate:I,setSelectedDate:F,selectedGuests:A,setSelectedGuests:P,queryParams:z}=t1(t),L=y.useCallback((e,s,r)=>e?e.filter(e=>(!r||e.city===r.city)&&(!!r||!t||e.city===t)&&(!Object.keys(u).length||!r||!!u[e.id])&&s.every(t=>isNaN(Number(t))?e.stars===t||e.services.includes(t)||e.locations.includes(t):e.people>=Number(t))):e,[t,u]),R=M?.city?M.city:t;return y.useEffect(()=>{s&&a(L(s,N,M))},[N,s,L,M]),y.useEffect(()=>{let e=setInterval(()=>{let t=localStorage.getItem("room_types");t&&(h(JSON.parse(t)),clearInterval(e))},600);return()=>clearInterval(e)},[]),y.useEffect(()=>{Object.values(_).length<1||(async()=>{let e=e=>(0,et.WU)(e,"yyyy-MM-dd"),t=(e,t)=>(0,te.j)(t,e),s=e=>e.adult+(e.childrenAge.length?e.childrenAge.length-1:0),r=async(r,l)=>{if(r&&l){let[a,n]=r;d(await t5(e(a),e(n),t(a,n),s(l),_))}};M&&await r(M.date,M)})().then()},[M,_]),(0,v.jsxs)("section",{className:x().root,children:[(0,v.jsx)(eD,{hotels:l,filterTL:M,isOpenFilters:m,openFilters:g,selectedFilters:N,removeFilter:C,clearFilters:S,handleClickFilter:O,selectedHotelID:n,setHoverHotelID:c,setSelectedCity:H,hoverHotelID:o,openModal:b,isOpenMapMobile:f,handleOpenMapMobile:k,queryParams:z,cityPage:R,selectedDate:I,selectedGuests:A,price:u}),(0,v.jsx)(tX,{isOpen:m,close:w,selectedFilters:N,handleClickFilter:O,clearFilters:S,cityPage:R}),l&&(0,v.jsx)(eU,{isOpenMapMobile:f,hotels:l,city:E,selectedHotelID:n,setSelectedHotelID:i,hoverHotelID:o,setHoverHotelID:c,queryParams:z,price:u}),(0,v.jsx)(eN.u,{isOpen:p,close:j,opacityBG:r?0:.4,mobileCloseIcon:!1,notDelayed:r,children:(0,v.jsx)(tO,{closeModal:j,setTlFilter:D,selectedCity:E,setSelectedCity:H,selectedDate:I,setSelectedDate:F,selectedGuests:A,setSelectedGuests:P})})]})}},10087:function(e,t,s){"use strict";s.d(t,{y:function(){return m}});var r=s(57437);s(2265);var l=s(13114),a=s.n(l),n=s(16480),i=s.n(n),o=s(43431),c=s(42256),u=s(29624),d=s(8792),_=s(90683),h=s(79189),p=s(96403);function m(e){let{title:t,address:s,slides:l,id:n,queryParams:m,price:v,isSlider:y}=e;return(0,r.jsxs)(d.default,{className:i()(a().root),href:m.length>0?`/hotels/${(0,p.r)(n)}/${_.D[n]}?${m}`:`/hotels/${(0,p.r)(n)}/${_.D[n]}`,children:[(0,r.jsx)(h.l,{images:l,isActive:!0,isMapCard:!0,isSlider:!0}),(0,r.jsx)(o.l,{title:t}),(0,r.jsx)(c.Y,{text:s,location:"1",className:a().location,hotelsSelect:!0}),(0,r.jsx)(u.y,{isHover:!0,price:v[n],isBalloon:!0,isSlider:y})]})}},29624:function(e,t,s){"use strict";s.d(t,{y:function(){return m}});var r,l=s(57437);s(2265);var a=s(75803),n=s.n(a),i=s(16480),o=s.n(i),c=s(74898),u=s(52846);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}var _=e=>u.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:7,height:12,fill:"none"},e),r||(r=u.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 5 5-5 5"}))),h=s(24843),p=s(2769);function m(e){let{isHover:t,isBalloon:s,isSlider:r,price:a}=e,i=(0,h.GS)(p.ai);return(0,l.jsxs)("div",{className:o()(n().root,{[n().balloon]:s}),children:[(0,l.jsx)("span",{className:n().price,children:a?`От ${a} ₽`:""}),(0,l.jsx)(c.z,{className:o()(n().button,{[n().hover]:t},{[n().balloon]:s},{[n().slider]:r}),green:!0,l:!0,children:r?"Забронировать":i||s?(0,l.jsx)(_,{}):"Выбрать"})]})}},79189:function(e,t,s){"use strict";s.d(t,{l:function(){return h}});var r=s(57437),l=s(2265),a=s(15864),n=s.n(a),i=s(20703),o=s(16480),c=s.n(o),u=s(48344),d=s(45543);s(86978),s(70501),s(67090);var _=s(17269);function h(e){let{images:t,isActive:s,isMapCard:a,isSlider:o}=e,h=l.useRef(null),p=l.useRef(null),m=e=>{e.preventDefault(),e.stopPropagation()};return(0,r.jsxs)("div",{className:c()(n().root,{[n().map_card]:a}),children:[(0,r.jsx)(_.Z,{className:c()(n().arrow,n().prev,{[n().active]:s&&t.length>1}),onClick:e=>{m(e),p?.current?.slidePrev()}}),(0,r.jsx)(_.Z,{className:c()(n().arrow,n().next,{[n().active]:s&&t.length>1}),onClick:e=>{m(e),p?.current?.slideNext()}}),(0,r.jsx)(u.tq,{className:c()(n().slider,"pagination-hotels-card"),modules:[d.tl],pagination:{dynamicBullets:!0},spaceBetween:0,slidesPerView:1,loop:!0,ref:h,lazy:"true",onSwiper:e=>p.current=e,children:t.map((e,t)=>{if(!o||!(t>2))return(0,r.jsx)(u.o5,{className:n().slide,children:(0,r.jsx)(i.default,{className:c()(n().image),src:e,alt:"img",width:400,height:400,loading:t>0?"lazy":"eager",priority:t<1})},t)})})]})}},43431:function(e,t,s){"use strict";s.d(t,{l:function(){return n}});var r=s(57437);s(2265);var l=s(39569),a=s.n(l);function n(e){let{title:t}=e;return(0,r.jsx)("h2",{className:a().root,children:t})}},96403:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var r=s(84402);let l=e=>e===r.h.pokrovka?"msk":"spb"},15361:function(e,t,s){"use strict";s.d(t,{DH:function(){return l},dc:function(){return i},u_:function(){return m},mz:function(){return y}});let r=(e,t)=>{if("undefined"==typeof document)return null;let s=document.cookie.split("; ").find(t=>t.startsWith(e))?.split("=")[1];return s?JSON.parse(decodeURIComponent(s))[t]:null},l="+7 (800) 505–49–90",a="+7 (800) 101-54-26",n="+ 7 (800) 201‒89‒70",i="+ 7 (800) 101-96-57",o="utm_source",c="maps",u="maps",d="yandex-somov",_="yandex_i",h="2gis",p=e=>{switch(e){case c:case u:return a;case h:return n;case d:return i;case _:return a;default:return l}},m=()=>{let e=r("utm",o);return e?p(e):l},v=e=>{switch(e){case c:case u:return"+7 (800) 101-54-26";case h:return n;case d:return i;case _:return a;default:return l}},y=()=>{let e=r("utm",o);return e?v(e):l}},68036:function(e,t,s){"use strict";var r,l;s.d(t,{t:function(){return r}}),(l=r||(r={})).spb="Санкт-Петербург",l.msk="Москва"},92937:function(){},23613:function(){},67090:function(){},94889:function(e){e.exports={root:"style_root__8Yk_A",apply:"style_apply__LeDWg",clear:"style_clear__a8Fvx"}},25622:function(e){e.exports={root:"style_root__JDIIU",disabled:"style_disabled__oqTqu",active:"style_active__rqdkR"}},27604:function(e){e.exports={root:"style_root__70mwm",wrapper:"style_wrapper__OhjlC",icon:"style_icon__x7Oy7",pop_up:"style_pop_up__NbXwi",active:"style_active__hg4jl",footnote:"style_footnote___pZEe"}},96131:function(e){e.exports={root:"style_root__umeVd",wrapper:"style_wrapper__Y5_BF"}},41922:function(e){e.exports={root:"style_root__wxhAv",wrapper:"style_wrapper__VHbz5",active:"style_active___ib2R",button:"style_button__RAjIy",arrow:"style_arrow__2B3Ht"}},55014:function(e){e.exports={root:"style_root__pd5HM"}},2441:function(e){e.exports={root:"style_root__Nf2MX",active:"style_active__qZhBs",toggle:"style_toggle__j692M"}},68670:function(e){e.exports={root:"style_root__XrR_X",active:"style_active__vmNL2",wrapper:"style_wrapper__nw6qf",close:"style_close__Z2c41",filters:"style_filters__zjyCe",filters_wrapper:"style_filters_wrapper__6ja0J",tags:"style_tags__c9uMa"}},99931:function(e){e.exports={root:"style_root__Ah2Dh"}},13114:function(e){e.exports={root:"style_root__SWmTU",location:"style_location__NK09X"}},86743:function(e){e.exports={root:"style_root__2UzxK"}},65853:function(e){e.exports={root:"style_root__g_lte",active:"style_active__j_Ox8",gradient:"style_gradient__AwkiZ"}},46702:function(e){e.exports={title:"style_title__kF563",counter:"style_counter__bjm3s",counter_icon:"style_counter_icon__gNt5x",counter_button:"style_counter_button__9UUmA",disable:"style_disable__bdhRs"}},78577:function(e){e.exports={root:"style_root__uogk_",icon:"style_icon__nkVsk",arrow:"style_arrow__1nixM",active:"style_active__YJxwh"}},44110:function(e){e.exports={root:"style_root__Rdb_O",active:"style_active__FRpWV",title:"style_title__YI1uv",value:"style_value__VATk9",string:"style_string__Yv_eU"}},6582:function(e){e.exports={root:"style_root__tNTvS",active:"style_active__car5h",title:"style_title__vRPTX",counters_wrapper:"style_counters_wrapper__ES92_",bottom:"style_bottom__vzbzd",select_wrapper:"style_select_wrapper__tJ99f",button:"style_button__gHnYg"}},29703:function(e){e.exports={root:"style_root__6yGch",active:"style_active__ZjcVh",bottom:"style_bottom__wvrHT"}},6323:function(e){e.exports={root:"style_root__xncHH",active:"style_active__c2Q9k"}},23588:function(e){e.exports={root:"style_root__qRsS1",valid:"style_valid__ZN7ek",disabled:"style_disabled__gaQRh"}},24032:function(e){e.exports={root:"style_root__wjKQ3",title:"style_title__AZd9K",inputs_wrapper:"style_inputs_wrapper__RqFQz",button:"style_button__l1nfG",close_button:"style_close_button__ta04O"}},4338:function(e){e.exports={root:"style_root__N8mxx",amenities:"style_amenities__qS9z8"}},58924:function(e){e.exports={root:"style_root__O2V94",location_2:"style_location_2__GoePZ"}},75803:function(e){e.exports={root:"style_root__C2_YP",balloon:"style_balloon__U9Iso",price:"style_price__zCEpF",button:"style_button__gMJi_",hover:"style_hover__fGxkl",slider:"style_slider__SPxKf"}},15864:function(e){e.exports={root:"style_root__4cO7K",map_card:"style_map_card__9kK5K",slider:"style_slider__iSwL_",slide:"style_slide__XyRs1",arrow:"style_arrow__huCHx",active:"style_active__zC7D4",prev:"style_prev__UpIf1",next:"style_next__4cYVj"}},39569:function(e){e.exports={root:"style_root__j9W0V"}},82901:function(e){e.exports={root:"style_root__eS5rT",hover:"style_hover__2B8zF"}},60509:function(e){e.exports={root:"style_root__RkpJv",map_active:"style_map_active__IeP7a",cards_wrapper:"style_cards_wrapper__aHrwU",gradient:"style_gradient__T_UTw"}},42241:function(e){e.exports={root:"style_root__2Jb4E",text:"style_text__dmSkH",checkbox:"style_checkbox__WL9Jm"}},69889:function(e){e.exports={root:"style_root__DwnrD",hover:"style_hover__cVARE",msk:"style_msk__HfPRr",title:"style_title__ZVV2r",arrow:"style_arrow_____NR",items:"style_items__2SOv4"}},11393:function(e){e.exports={root:"style_root__1GiDQ",wrapper:"style_wrapper__IOnwG",all_filters_button:"style_all_filters_button__nK4Dt",filters:"style_filters__ZM_cZ"}},86724:function(e){e.exports={root:"style_root__9Pygg"}},46783:function(e){e.exports={root:"style_root__2Et3K",title:"style_title__S5dVQ",search_wrapper:"style_search_wrapper__TrtbY",hidden:"style_hidden__j3V9s",search:"style_search__BqLkn",city:"style_city___Jdfe",center:"style_center__RRWmI",guests:"style_guests__O5Ibm",icon:"style_icon__pXpiw"}},60892:function(e){e.exports={root:"style_root__hoYFX",title:"style_title__NOmon",filters_wrapper:"style_filters_wrapper__vCg_b",selected_title:"style_selected_title___XJBi",filter:"style_filter__oXls7"}},57967:function(e){e.exports={root:"style_root__4pwrZ",map_active:"style_map_active__d_WVb",filters_active:"style_filters_active__KgU4H",title:"style_title__sBomS",mobile_button:"style_mobile_button___SBcG",mobile_filters_wrapper:"style_mobile_filters_wrapper__LYhm_",close:"style_close__AeJDt",button:"style_button__qmAkw",mobile_filters:"style_mobile_filters__vU12R"}},94701:function(e){e.exports={root:"style_root__v4r7W"}}}]);