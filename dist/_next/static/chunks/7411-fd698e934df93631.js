(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7411],{17269:function(e,t,s){"use strict";var l,r=s(52846);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}t.Z=e=>r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},e),l||(l=r.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.191 1.414 1.706 9.9m0 0 8.485 8.486M1.706 9.899h16.97"})))},73527:function(e,t,s){"use strict";var l,r,a=s(52846);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}t.Z=e=>a.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 15 15"},e),l||(l=a.createElement("path",{fill:"#CDD2DE",d:"M7.5 0a7.5 7.5 0 1 0 0 15 7.5 7.5 0 0 0 0-15"})),r||(r=a.createElement("path",{fill:"#fff",d:"M6.68 6h1.3v5h-1.3zm-.19-1.41a.65.65 0 0 1 .21-.49q.22-.21.6-.21t.61.21q.24.2.24.49t-.24.49q-.23.19-.61.19t-.6-.19a.65.65 0 0 1-.21-.49"})))},70772:function(e,t,s){Promise.resolve().then(s.bind(s,33197))},58165:function(e,t,s){"use strict";s.d(t,{v:function(){return o}});var l=s(57437);s(2265);var r=s(25622),a=s.n(r),n=s(16480),i=s.n(n);function o(e){let{name:t,isChecked:s,handleClickFilter:r,isDisabled:n}=e;return(0,l.jsx)("div",{role:"checkbox","aria-checked":s,className:i()(a().root,{[a().active]:s},{[a().disabled]:n}),onClick:r(s,t),children:(0,l.jsx)("span",{children:t})})}},33197:function(e,t,s){"use strict";s.r(t),s.d(t,{Main:function(){return t1}});var l,r,a,n,i,o,c,u,d,_,h,p=s(57437),m=s(2265),v=s(99931),y=s.n(v),f=s(57967),x=s.n(f),b=s(60509),j=s.n(b),g=s(82901),k=s.n(g),w=s(16480),N=s.n(w),C=s(79189),S=s(4338),D=s.n(S),M=s(91967),O=s(58924),I=s.n(O),E=s(81837),H=s(42256);function F(e){let{locations:t,metro:s,address:l}=e;return(0,p.jsxs)("div",{className:I().root,children:[(0,p.jsx)(H.Y,{text:l,location:"1",hotelsSelect:!0}),(0,p.jsx)(E.m,{textBefore:s.distance,metro:s.stations,hotelsSelect:!0}),(0,p.jsx)(H.Y,{className:I().location_2,text:`${t.distance} ${t.textBefore} ${t.text}`,location:"2",hotelsSelect:!0})]})}var A=s(43431);function P(e){let{title:t,locations:s,metro:l,address:r,amenities:a}=e;return(0,p.jsxs)("div",{className:D().root,children:[(0,p.jsx)(A.l,{title:t}),(0,p.jsx)(F,{locations:s,metro:l,address:r}),(0,p.jsx)(M.a,{className:D().amenities,amenities:a})]})}var z=s(29624),R=s(24843),L=s(2769),W=s(8792),V=s(18123),B=s(51388);function $(e){let{item:t,selectedHotelID:s,setSelectedCity:l,hoverHotelID:r,setHoverHotelID:a,setTopCard:n,queryParams:i,price:o}=e,c=(0,R.GS)(L.Mq),[u,d]=m.useState(!1),_=r?r===t.id:s===t.id,h=m.useRef(null);m.useEffect(()=>{if(!h||!h.current)return;let e=h.current.offsetTop;if(c&&s===t.id){n(e);return}r!==t.id||u||n(e),""===r&&s===t.id&&n(e)},[r,t.id,n,u,s,c]);let v=V.H[t.id],y=v?"a":W.default,f=v||(0,B.V)(i,t.id);return(0,p.jsxs)(y,{className:N()(k().root,{[k().hover]:_}),onMouseEnter:()=>{a(t.id),l(t.city),d(!0)},onMouseLeave:()=>{a(""),d(!1)},href:f,ref:h,...v?{target:"_blank",rel:"noreferrer nofollow"}:{},children:[(0,p.jsx)(C.l,{images:t.images.small,isActive:u}),(0,p.jsx)(P,{title:t.header,locations:t.landmarks.main,metro:t.metro,address:`${t.city}, ${t.address}`,amenities:t.services}),(0,p.jsx)(z.y,{isHover:_,price:o})]})}var q=s(86724),G=s.n(q);let T=m.forwardRef((e,t)=>{let{children:s,className:l}=e;return(0,p.jsx)("div",{className:N()(G().root,l),ref:t,children:s})});function U(e){let{isOpenMapMobile:t,hotels:s,selectedHotelID:l,setSelectedCity:r,hoverHotelID:a,setHoverHotelID:n,queryParams:i,price:o}=e,c=(0,R.GS)(L.Mq),u=m.useRef(null),[d,_]=m.useState(0);return m.useEffect(()=>{if(!c&&window.innerWidth<window.innerHeight&&l){window.scrollTo({top:d+300,behavior:"smooth"});return}if(c&&window&&!t&&l){window.scrollTo({top:d+260,behavior:"smooth"});return}u?.current?.scrollTo({top:d,behavior:"smooth"})},[d,u,c,t,l]),(0,p.jsxs)("div",{className:N()(j().root,{[j().map_active]:t}),children:[(0,p.jsx)(T,{className:j().cards_wrapper,ref:u,children:s.map((e,t)=>(0,p.jsx)($,{item:e,selectedHotelID:l,setSelectedCity:r,hoverHotelID:a,setHoverHotelID:n,setTopCard:_,queryParams:i,price:o[e.id]},t))}),(0,p.jsx)("div",{className:j().gradient})]})}T.displayName="Scrollbar";var Z=s(46783),J=s.n(Z),Y=s(52846);function K(){return(K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}var X=e=>Y.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 13 13"},e),a||(a=Y.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.667 8.77 8.259m0 0A4.5 4.5 0 1 0 2.23 2.075a4.5 4.5 0 0 0 6.538 6.184"}))),Q=s(82700),ee=s(68036);function et(e){let{openModal:t,filterTL:s,cityPage:l,selectedDate:r,selectedGuests:a}=e,n=m.useCallback(()=>{if(!s)return;let{guests:e}=s;switch(!0){case 1===e:return"гость";case 5===e:return"гостей";default:return"гостя"}},[s]),i=m.useCallback(()=>{if(s){let{date:e}=s,t=(0,Q.WU)(e[0],"dd.MM"),l=(0,Q.WU)(e[1],"dd.MM");return`${t} - ${l}`}},[s]);return(0,p.jsxs)("div",{className:J().root,children:[(0,p.jsx)("span",{className:J().title,children:"Наши отели"}),(0,p.jsxs)("div",{className:J().search,onClick:t,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:N()(J().city,{[J().center]:!s}),children:(()=>{if(s)return s.city;switch(l){case ee.t.spb:return ee.t.spb;case ee.t.msk:return ee.t.msk;default:return""}})()}),(0,p.jsx)("span",{className:J().date,children:i()}),s&&(0,p.jsxs)("span",{className:J().guests,children:[s.guests," ",n()]})]}),(0,p.jsx)(X,{className:J().icon})]})]})}var es=s(11393),el=s.n(es);function er(){return(er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}var ea=e=>Y.createElement("svg",er({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),n||(n=Y.createElement("path",{stroke:"#8E99AF",strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 8.5v2m0 2v-2m2 0h2m-4 0h-9M5.5 7.5v-2m0-2v2m2 0h7m-9 0h-4"}))),en=s(69889),ei=s.n(en),eo=s(71857),ec=s(42241),eu=s.n(ec);function ed(e){let{className:t,name:s,isChecked:l,handleClickFilter:r}=e;return(0,p.jsxs)("div",{className:N()(eu().root,t),onClick:r(l,s),children:[(0,p.jsx)("span",{className:eu().text,children:s}),(0,p.jsx)("label",{children:(0,p.jsx)("input",{className:eu().checkbox,type:"checkbox",name:"agree",checked:l,onChange:()=>{}})})]})}function e_(e){let{title:t,items:s,selectedFilters:l,handleClickFilter:r,setOpenMobileFilters:a,isMSK:n}=e,i=(0,R.GS)(L.Mq),[o,c]=m.useState(!1);return(0,p.jsxs)("div",{className:N()(ei().root,{[ei().msk]:n},{[ei().hover]:o}),onMouseLeave:()=>!i&&c(!1),onClick:()=>{i&&a({isOpen:!0,filterName:t})},children:[(0,p.jsxs)("div",{className:N()(ei().title,{[ei().hover]:o}),onMouseEnter:()=>!i&&c(!0),children:[(0,p.jsx)("span",{children:t}),(0,p.jsx)(eo.Z,{className:N()(ei().arrow,{[ei().hover]:o})})]}),(0,p.jsx)(T,{className:N()(ei().items,{[ei().hover]:o}),children:s.map((e,t)=>(0,p.jsx)(ed,{name:e,isChecked:l.includes(e),handleClickFilter:r},t))})]})}var eh=s(34109),ep=s(15361);(l=i||(i={})).stars="Звездность",l.food="Питание",l.metro="Метро",l.attractions="Знаковые места",l.railways="Вокзалы",l.streets="Улицы поблизости",l.beds="Мест в номере",l.kids="С детьми",l.pets="С питомцами",l.business="Командировка",l.transfer="Трансфер",l.amenities="В отеле",l.services="Услуги",(r=o||(o={})).checkbox="checkbox",r.switch="switch";let em=[{title:"Звездность",type:"checkbox",items:[eh.W.star3,eh.W.star4]},{title:"Питание",type:"checkbox",items:["Завтрак","\xabШведский стол\xbb"]},{title:"Метро",type:"checkbox",items:["Адмиралтейская","Невский проспект / Гостиный двор","Площадь Ал. Невского / Площадь Ал. Невского","Площадь Восстания / Маяковская","Садовая / Сенная / Спасская","Чернышевская","Горьковская","Спортивная"]},{title:"Знаковые места",type:"checkbox",items:["Эрмитаж","Мариинский театр","Летний сад","Русский музей","Исаакиевский собор","Кунсткамера","Медный всадник","Казанский собор","Дворцовая площадь","Спас на Крови","Новая Голландия","Юсуповский дворец","Дворцовый мост","Музей Фаберже","Александринский театр","Михайловский замок","Анненкирхе","Смольный собор","Троицкий мост","Аничков мост","Пять углов","Мариинский концертный зал","Юсуповский сад","ТРЦ Галерея","Петропавловская крепость","Зоопарк"]},{title:"Вокзалы",type:"checkbox",items:["Московский (Сапсан)","Балтийский (Петергоф)","Витебский (Пушкин, Павловск)","Финляндский (Выборг)"]},{title:"Улицы поблизости",type:"checkbox",items:["Невский проспект","Садовая","Рубинштейна","Пушкинская","Правды","Некрасова","Набережная Фонтанки","Марата","Литейный проспект","Лиговский проспект","Канал Грибоедова","Джона Леннона","Большая Морская","Синопская набережная","Каменноостровский проспект","Большой проспект"]},{title:"Мест в номере",type:"checkbox",items:["1","2","3","4"]},{title:"С детьми",type:"switch",items:["С детьми"]},{title:"С питомцами",type:"switch",items:["С питомцами"]},{title:"Командировка",type:"switch",items:["Командировка"]},{title:"Трансфер",type:"switch",items:["Трансфер"]},{title:"В отеле",type:"checkbox",items:["Wi-Fi","Телевизор","Сейф*","Рабочий стол*","Кухонная зона","Холодильник","Электрический чайник","Душ","Ванна*","Стиральная машина*","Прачечная","Фен","Кондиционер","Балкон*","Лифт","Парковка (ограничено)"],popUp:{item:"Парковка (ограничено)",text:`Парковочных мест ограниченное количество. Пожалуйста, бронируйте их заранее по телефону <br/><b><a href="tel:${(0,ep.mz)()}">${(0,ep.u_)()}</a></b>`}},{title:"Услуги",type:"checkbox",items:["Круглосуточное заселение","Круглосуточное обслуживание","Дополнительное спальное место","Детская кроватка","Доставка еды и напитков в номер","Хранение багажа","Экскурсии","Музеи"]}],ev=[{title:"Звездность",type:"checkbox",items:[eh.W.star3]},{title:"Метро",type:"checkbox",items:["Комсомольская","Площадь трёх вокзалов","Курская","Красные ворота","Китай-город","Ленинградский вокзал","Таганская","Бауманская","Театральная","Чистые пруды"]},{title:"Вокзалы",type:"checkbox",items:["Казанский","Ленинградский","Ярославский","Курский"]},{title:"Знаковые места",type:"checkbox",items:["Красная площадь","Парк Зарядье","Московский Кремль","ВШЭ","Большой театр","Институт мозга","ЦУМ","Artplay","Нулевой километр","Дом Утюг","Дом-яйцо","Лобное место","Парящий мост"]},{title:"Улицы поблизости",type:"checkbox",items:["Большая Лубянка","Земляной Вал","Космодамианская набережная","Котельническая набережная","Моховая","Мясницкая","Петровка","Покровка","Проспект Мира","Рождественский бульвар","Садовое кольцо","Театральный проезд","Чистопрудный бульвар","Яуза"]},{title:"Мест в номере",type:"checkbox",items:["1","2"]},{title:"С детьми",type:"switch",items:["С детьми"]},{title:"С питомцами",type:"switch",items:["С питомцами"]},{title:"Командировка",type:"switch",items:["Командировка"]},{title:"Трансфер",type:"switch",items:["Трансфер"]},{title:"В отеле",type:"checkbox",items:["Wi-Fi","Телевизор","Сейф*","Кухонная зона","Холодильник","Электрический чайник","Душ","Прачечная","Фен","Парковка (ограничено)"],popUp:{item:"Парковка (ограничено)",text:`Парковочных мест ограниченное количество. Пожалуйста, бронируйте их заранее по телефону <b><a href="tel:${(0,ep.mz)()}">${(0,ep.u_)()}</a></b>`}},{title:"Услуги",type:"checkbox",items:["Круглосуточное заселение","Дополнительное спальное место","Экскурсии","Музеи"]}];function ey(e){let{openFilters:t,selectedFilters:s,handleClickFilter:l,setOpenMobileFilters:r,cityPage:a}=e,n=[i.stars,i.food,i.metro,i.attractions].map(e=>em.find(t=>t.title===e)).filter(Boolean),o=[i.stars,i.metro,i.railways,i.attractions].map(e=>ev.find(t=>t.title===e)).filter(Boolean),c=a===ee.t.msk,u=c?o:n;return(0,p.jsx)("div",{className:el().root,children:(0,p.jsxs)("div",{className:el().wrapper,children:[(0,p.jsxs)("div",{className:el().all_filters_button,onClick:t,role:"button",children:[(0,p.jsx)(ea,{}),(0,p.jsx)("span",{children:"Все фильтры"})]}),(0,p.jsx)("div",{className:el().filters,children:u.map((e,t)=>{if(e)return(0,p.jsx)(e_,{title:e.title,items:e.items,selectedFilters:s,handleClickFilter:l,setOpenMobileFilters:r,isMSK:c},t)})})]})})}var ef=s(60892),ex=s.n(ef);function eb(e){let{selectedFilters:t,removeFilter:s,clearFilters:l,amount:r}=e;return(0,p.jsxs)("div",{className:ex().root,children:[(0,p.jsxs)("span",{className:ex().title,children:["Есть ",r," подходящих вариантов:"]}),t.length>0&&(0,p.jsxs)("div",{className:ex().filters_wrapper,children:[(0,p.jsx)("span",{className:ex().selected_title,children:"Выбранные фильтры:"}),t.map((e,t)=>(0,p.jsx)("span",{className:ex().filter,onClick:s(e),children:e},t)),(0,p.jsx)("span",{className:ex().filter,onClick:l,children:"Сбросить"})]})]})}var ej=s(74898),eg=s(81937),ek=s(31552),ew=s(20339);let eN="Апарт-отели 3* и 4* в Санкт-Петербурге и Москве в центре",eC="Апарт-отели Port Comfort в центре Санкт-Петербурга - аренда апартаментов на любой вкус",eS="Апарт-отели Port Comfort в центре Москвы";function eD(e){let{hotels:t,filterTL:s,isOpenFilters:l,openFilters:r,selectedFilters:a,removeFilter:n,clearFilters:i,handleClickFilter:o,selectedHotelID:c,setHoverHotelID:u,setSelectedCity:d,hoverHotelID:_,openModal:h,isOpenMapMobile:v,handleOpenMapMobile:y,queryParams:f,cityPage:b,selectedDate:j,selectedGuests:g,price:k}=e,[w,C]=m.useState({isOpen:!1,filterName:""}),S=(b===ee.t.msk?ev:em).find(e=>e.title===w.filterName),D=m.useCallback(()=>{window&&!v&&window.scrollTo(0,0),y()},[v,y]),M=m.useCallback(()=>{if(s)switch(s.city){case ee.t.spb:return eC;case ee.t.msk:return eS;default:return eN}switch(b){case ee.t.spb:return eC;case ee.t.msk:return eS;default:return eN}},[b,s]);return(0,p.jsxs)("div",{className:N()(x().root,{[x().map_active]:v},{[x().filters_active]:l}),children:[(0,p.jsx)("h1",{className:x().title,children:M()}),(0,p.jsx)(et,{openModal:h,filterTL:s,cityPage:b,selectedDate:j,selectedGuests:g}),(0,p.jsx)(ey,{openFilters:r,selectedFilters:a,handleClickFilter:o,setOpenMobileFilters:C,cityPage:b}),(0,p.jsx)(eb,{selectedFilters:a,removeFilter:n,clearFilters:i,amount:t?t.length:0}),t&&(0,p.jsx)(U,{isOpenMapMobile:v,hotels:t,selectedHotelID:c,setSelectedCity:d,hoverHotelID:_,setHoverHotelID:u,queryParams:f,price:k}),(0,p.jsx)(ek.u,{isOpen:w.isOpen,close:()=>C({isOpen:!1,filterName:""}),mobileCloseIcon:!1,opacityBG:.3,children:(0,p.jsxs)("div",{className:x().mobile_filters_wrapper,children:[(0,p.jsx)(ew.P,{className:x().close,close:()=>C({isOpen:!1,filterName:""})}),(0,p.jsx)("div",{className:x().mobile_filters,children:S&&S.items.map((e,t)=>(0,p.jsx)(ed,{name:e,isChecked:a.includes(e),handleClickFilter:o},t))}),(0,p.jsx)(ej.z,{green:!0,className:x().button,onClick:()=>C({isOpen:!1,filterName:""}),children:"Готово"})]})}),(0,p.jsxs)(ej.z,{className:N()(x().mobile_button,{[x().map_active]:v}),onClick:D,xl:!0,purpleGradient:!0,children:[v&&(0,p.jsx)(eg.Z,{}),v?"К списоку отелей ":"На карте"]})]})}var eM=s(65853),eO=s.n(eM),eI=s(92522),eE=s(86743),eH=s.n(eE),eF=s(34040),eA=s(10087),eP=s(84402);function ez(e){let{item:t,ymapRef:s,selectedHotelID:l,setSelectedHotelID:r,hoverHotelID:a,setHoverHotelID:n,queryParams:i,price:o}=e,[c,u]=m.useState(),[d,_]=m.useState(!1),h=(0,R.GS)(L.Mq),v=(0,R.GS)(L.ai),{id:y,header:f,coordinates:x,address:b,images:j,stars:g}=t,k=V.H[y],w=a?a===y:d,N=w?3:g===eh.W.star4?3:2,C=m.useCallback(()=>{if(v)switch(!0){case y===eP.hotelsID.ligovskiy:return[[0,0],[165,23]];case y===eP.hotelsID.sennaya:return[[0,0],[195,23]];case y===eP.hotelsID.gostiniyDvor:return[[0,0],[205,23]];case y===eP.hotelsID.moyka:return[[0,0],[148,23]];case y===eP.hotelsID.smolnyy:return[[0,0],[159,23]];case y===eP.hotelsID.nevskiy:return[[0,0],[175,23]];case y===eP.hotelsID.griboedov:return[[0,0],[187,23]];case y===eP.hotelsID.pokrovka:return[[0,0],[166,23]];case y===eP.hotelsID.mariinsky:return[[0,0],[175,23]];case y===eP.hotelsID.petrogradkaApartRooms:return[[0,0],[220,23]];default:return[[0,0],[175,23]]}switch(!0){case y===eP.hotelsID.ligovskiy:return[[0,0],[272,40]];case y===eP.hotelsID.sennaya:return[[0,0],[319,40]];case y===eP.hotelsID.gostiniyDvor:return[[0,0],[336,40]];case y===eP.hotelsID.moyka:return[[0,0],[246,40]];case y===eP.hotelsID.smolnyy:return[[0,0],[264,40]];case y===eP.hotelsID.nevskiy:return[[0,0],[289,40]];case y===eP.hotelsID.griboedov:return[[0,0],[308,40]];case y===eP.hotelsID.pokrovka:return[[0,0],[301,40]];case y===eP.hotelsID.mariinsky:return[[0,0],[281,40]];case y===eP.hotelsID.petrogradkaApartRooms:return[[0,0],[360,40]];default:return[[0,0],[281,40]]}},[y,v]),S=m.useCallback(()=>{let e=document.getElementsByClassName("ymaps-2-1-79-balloon")[0],t=eF.createRoot(document.getElementById("balloon-content"));(e||t)&&(e.classList.add("hotels_balloon"),t.render((0,p.jsx)(eA.y,{title:f,address:b,slides:j.small,queryParams:i,id:y,price:o})))},[b,j,f,i,y,o]),D=m.useCallback(()=>{S(),r(y),_(!0)},[y,r,S]),M=m.useCallback(()=>{_(!1),r("")},[r]);m.useEffect(()=>{c&&y===l&&c.balloon.close()},[i,c]);let O=s.templateLayoutFactory.createClass(`<div class="placemark_hotel">
                                <h2 class="placemark_hotel_header"><b>${f}</b></h2>
                                <div class="placemark_hotel_arrow"/>
                            </div>
                        `,{build:function(){O.superclass.build.call(this);let e=this.getParentElement().getElementsByClassName("placemark_hotel")[0];e.style.position="relative",e.style.fontSize=v?"1rem":"1.6rem",e.style.textTransform="uppercase",e.style.padding=v?"0.5rem 1rem":"1rem 2rem",e.style.borderRadius="1.8rem",e.style.background=w?k?"#282D81":"#1D5377":`url("/images/map/${k?"placemarkIcon2":"placemarkIcon"}.png") no-repeat`,e.style.backgroundPosition=v?"3.5rem top":"3rem top",e.style.backgroundSize="contain",e.style.width="fit-content",e.style.whiteSpace="nowrap",e.style.color=w?"white":"#424753",e.style.height=w?"unset":v?"3rem":"5.5rem",this.getParentElement().getElementsByClassName("placemark_hotel_header")[0].style.opacity=w?"1":"0";let t=this.getParentElement().getElementsByClassName("placemark_hotel_arrow")[0];t.style.display=w?"unset":"none",t.style.position="absolute",t.style.width=v?"1rem":"2rem",t.style.height=v?"1rem":"2rem",t.style.transform="rotate(45deg)",t.style.background=w?k?"#282D81":"#1D5377":"white",t.style.zIndex="-1",t.style.bottom=v?"-0.5rem":"-1rem",t.style.left="4rem",this.getData().geoObject.events.add("mouseenter",()=>{a!==y&&n(y)}),this.getData().geoObject.events.add("mouseleave",()=>{n("")})}});return(0,p.jsx)(eI.ah,{geometry:x,properties:{balloonContent:'<div class="hotels_page_balloon_content" id="balloon-content"></div>'},options:{balloonMaxWidth:359,balloonMaxHeight:359,balloonPanelMaxMapArea:h?1/0:0,balloonAutoPan:!h,iconLayout:O,iconShape:{type:"Rectangle",coordinates:w?C():v?[[30,0],[70,23]]:[[30,0],[70,40]]},iconOffset:[-50,-50],zIndex:N,hideIconOnBalloonOpen:!1,balloonOffset:[0,-30]},modules:["geoObject.addon.balloon","geoObject.addon.hint"],onBalloonOpen:D,onBalloonClose:M,instanceRef:e=>u(e)})}s(92937);var eR=s(94701),eL=s.n(eR);function eW(e){let{className:t,children:s,instanceRef:l,disable:r=!1}=e,a=(0,R.GS)(L.Mq),[n,i]=m.useState(!a),o=m.useCallback(e=>2===e.touches.length?i(!0):i(!1),[]);return m.useEffect(()=>{!r&&a&&l&&(n?l.behaviors.enable("drag"):l.behaviors.disable("drag"))},[a,n,l,r]),(0,p.jsx)("div",{className:N()(eL().root,t),onTouchStart:e=>o(e),children:s})}var eV=s(14199);function eB(e){let{hotels:t,selectedHotelID:s,setSelectedHotelID:l,city:r,isOpenMapMobile:a,hoverHotelID:n,setHoverHotelID:i,queryParams:o,price:c}=e,u=(0,R.GS)(L.ai),d=(0,R.GS)(L.Mq),_=(0,R.GS)(L.PJ),[h,v]=m.useState(),[y,f]=m.useState(),x=!d||d&&a,b=m.useCallback(e=>{switch(!0){case u&&e===ee.t.spb:return[59.936644,30.335868];case u&&e===ee.t.msk:return[55.77,37.629824];case d&&e===ee.t.spb:return[59.93,30.336];case d&&e===ee.t.msk:return[55.762816,37.639824];case _&&e===ee.t.spb:return[59.94,30.336];case _&&e===ee.t.msk:return[55.762816,37.639824];default:if(e===ee.t.spb)return[59.94,30.35];if(e===ee.t.msk)return[55.762816,37.639824]}return[0,0]},[_,u,d]);return m.useEffect(()=>{y?.setCenter(b(r)).then()},[r,d,u,b,y]),(0,p.jsx)("div",{className:eH().root,children:(0,p.jsx)(eI.Yy,{query:{apikey:"497feeb6-dc95-47ca-b1c3-75a4c310c9b7"},children:(0,p.jsx)(eW,{instanceRef:y,disable:d,children:x?(0,p.jsxs)(eI.D5,{width:"100%",height:"100%",defaultState:{center:b(r),zoom:u?12:13},instanceRef:e=>{e&&(e.behaviors.disable("scrollZoom"),f(e))},options:{yandexMapDisablePoiInteractivity:!0,suppressMapOpenBlock:!0,copyrightLogoVisible:!1,copyrightProvidersVisible:!1,copyrightUaVisible:!1},onLoad:e=>v(e),modules:["templateLayoutFactory","layout.ImageWithContent"],children:[!d&&(0,p.jsx)(eI.Ly,{options:{position:{right:27,bottom:360},size:"small"}}),t.map((e,t)=>{if(h)return(0,p.jsx)(ez,{item:e,ymapRef:h,selectedHotelID:s,setSelectedHotelID:l,hoverHotelID:n,setHoverHotelID:i,queryParams:o,price:c},t)}),(0,p.jsx)(eV.m,{ymapRef:h,instanceRef:y})]}):(0,p.jsx)(p.Fragment,{})})})})}function e$(e){let{hotels:t,selectedHotelID:s,setSelectedHotelID:l,isOpenMapMobile:r,city:a,hoverHotelID:n,setHoverHotelID:i,queryParams:o,price:c}=e;return(0,p.jsxs)("div",{className:N()(eO().root,{[eO().active]:r}),children:[(0,p.jsx)(eB,{hotels:t,selectedHotelID:s,setSelectedHotelID:l,city:a,isOpenMapMobile:r,hoverHotelID:n,setHoverHotelID:i,queryParams:o,price:c}),(0,p.jsx)("div",{className:N()(eO().gradient,{[eO().active]:r})})]})}let eq=(e,t)=>{switch(!0){case e===eh.W.star3:return t.filter(e=>e!==eh.W.star4);case e===eh.W.star4:return t.filter(e=>e!==eh.W.star3);default:return t}},eG=(e,t)=>{switch(!0){case"1"===e:return t.filter(e=>"2"!==e&&"3"!==e&&"4"!==e);case"2"===e:return t.filter(e=>"1"!==e&&"3"!==e&&"4"!==e);case"3"===e:return t.filter(e=>"2"!==e&&"1"!==e&&"4"!==e);case"4"===e:return t.filter(e=>"2"!==e&&"3"!==e&&"1"!==e);default:return t}},eT=(e,t)=>e===eh.W.star3||e===eh.W.star4?eq(e,t):"1"===e||"2"===e||"3"===e||"4"===e?eG(e,t):t,eU=()=>{let[e,t]=m.useState([]),s=m.useCallback(e=>()=>{t(t=>[...eT(e,t),e])},[]),l=m.useCallback(e=>()=>{t(t=>t.filter(t=>t!==e))},[]),r=m.useCallback(()=>{t([])},[]),a=m.useCallback((e,t)=>()=>{e?l(t)():s(t)()},[s,l]);return{selectedFilters:e,removeFilter:l,clearFilters:r,handleClickFilter:a}};var eZ=s(24032),eJ=s.n(eZ),eY=s(78577),eK=s.n(eY),eX=s(6323),eQ=s.n(eX);function e0(e){let{isActive:t,setIsActive:s,setValue:l,items:r}=e,a=m.useCallback(e=>()=>{l(e)(),s(!1)},[s,l]);return(0,p.jsx)("div",{className:N()(eQ().root,{[eQ().active]:t}),children:(0,p.jsx)("ul",{children:r.map((e,t)=>(0,p.jsx)("li",{onClick:a(e),children:e},t))})})}function e1(){return(e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}var e5=e=>Y.createElement("svg",e1({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 21 23"},e),c||(c=Y.createElement("path",{fill:"#8E99AF",fillRule:"evenodd",d:"M7 .667a.5.5 0 0 0-1 0v1.25H2.25a1.5 1.5 0 0 0-1.5 1.5v17.25a1.5 1.5 0 0 0 1.5 1.5H19.5a1.5 1.5 0 0 0 1.5-1.5V3.417a1.5 1.5 0 0 0-1.5-1.5h-3.75V.667a.5.5 0 0 0-1 0v1.25H7zm13 6.5v-3.75a.5.5 0 0 0-.5-.5h-3.75v1.25a.5.5 0 0 1-1 0v-1.25H7v1.25a.5.5 0 0 1-1 0v-1.25H2.25a.5.5 0 0 0-.5.5v3.75zm-18.25 1H20v12.5a.5.5 0 0 1-.5.5H2.25a.5.5 0 0 1-.5-.5zm2.5 3a.5.5 0 0 1 .5-.5H6.5a.5.5 0 0 1 0 1H4.75a.5.5 0 0 1-.5-.5m5.25 0a.5.5 0 0 1 .5-.5h1.75a.5.5 0 0 1 0 1H10a.5.5 0 0 1-.5-.5m5.25 0a.5.5 0 0 1 .5-.5H17a.5.5 0 0 1 0 1h-1.75a.5.5 0 0 1-.5-.5m-10.5 5.25a.5.5 0 0 1 .5-.5H6.5a.5.5 0 0 1 0 1H4.75a.5.5 0 0 1-.5-.5m5.25 0a.5.5 0 0 1 .5-.5h1.75a.5.5 0 0 1 0 1H10a.5.5 0 0 1-.5-.5",clipRule:"evenodd"}))),e2=s(29703),e3=s.n(e2),e4=s(83441),e7=s.n(e4),e9=s(49740);s(23613),s(42413);var e6=s(39422),e8=s(3251),te=s(39291),tt=s(43328),ts=s(39315),tl=s(30666);function tr(e){let{isActive:t,setIsActive:s,value:l,setValue:r}=e,[a,n]=m.useState(l),[i,o]=m.useState(0),[c,u]=a,d=m.useRef(null),_=e=>{if(a[0]&&!a[1]){let t=(0,e6.j)(e,a[0]);if(!(t<1)){o(t);return}}};m.useEffect(()=>{let e=setTimeout(()=>{let e=d.current?.querySelectorAll(".react-datepicker__day--in-range");e&&e.length>0&&(e[0].classList.add("first-in-range"),e[e.length-1].classList.add("last-in-range"))},0);return()=>clearTimeout(e)},[c,u]);let h=m.useCallback(e=>{let t=e%10,s=e%100;return 1===t&&11!==s?"ночь":t>=2&&t<=4&&(s<12||s>14)?"ночи":"ночей"},[]),v=i?`Заезд ${(0,Q.WU)(a[0],"dd MMMM",{locale:e9.Z})} - Выезд ${(0,Q.WU)((0,e8.E)(a[0],i),"dd MMMM",{locale:e9.Z})} (${i} ${h(i)})`:"Выберите дату заезда",y=e=>(0,te._)(e)===(0,tt.N)(e);return(0,p.jsx)("div",{className:N()(e3().root,{[e3().active]:t}),ref:d,children:(0,p.jsxs)("div",{className:"datepicker_wrapper_hotels",children:[(0,p.jsx)(e7(),{locale:"ru",inline:!0,selectsRange:!0,onSelect:()=>{},minDate:new Date,maxDate:(0,ts.z)((0,tl.V)(new Date),10),calendarStartDay:1,monthsShown:2,startDate:a[0],endDate:a[1],onChange:e=>{n(e),e[1]&&(r(e)(),s(!1))},showDisabledMonthNavigation:!0,onDayMouseEnter:e=>_(e),dayClassName:e=>y(e)?"last_day_of_month":""}),(0,p.jsxs)("div",{className:e3().bottom,children:[(0,p.jsx)("span",{children:v}),(0,p.jsx)("span",{children:"Лучшие цены для 1 гостя за ночь "}),(0,p.jsx)("span",{children:"Цена может быть доступна при соблюдении специальных условий бронирования"})]})]})})}function ta(){return(ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}(0,e4.registerLocale)("ru",e9.Z);var tn=e=>Y.createElement("svg",ta({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 25"},e),u||(u=Y.createElement("path",{fill:"#8E99AF",d:"m17.834 13.8.323-.381zm-11.668 0 .324.381zm14.584 4.95c0-2.018-.945-3.933-2.593-5.331l-.647.762c1.447 1.228 2.24 2.874 2.24 4.569zm-1 0v1.5h1v-1.5zm-1.5 3H5.75v1h12.5zm-14-1.5v-1.5h-1v1.5zm1.593-6.831C4.196 14.817 3.25 16.732 3.25 18.75h1c0-1.695.793-3.34 2.24-4.568zM12 11.25c-2.297 0-4.512.773-6.157 2.169l.647.762c1.45-1.23 3.43-1.931 5.51-1.931zm6.157 2.169c-1.645-1.396-3.86-2.169-6.157-2.169v1c2.08 0 4.06.702 5.51 1.931zM5.75 21.75a1.5 1.5 0 0 1-1.5-1.5h-1a2.5 2.5 0 0 0 2.5 2.5zm14-1.5a1.5 1.5 0 0 1-1.5 1.5v1a2.5 2.5 0 0 0 2.5-2.5z"})),d||(d=Y.createElement("circle",{cx:12,cy:7.25,r:4.5,stroke:"#8E99AF"}))),ti=s(6582),to=s.n(ti),tc=s(46702),tu=s.n(tc);function td(){return(td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}var t_=e=>Y.createElement("svg",td({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 13 3"},e),_||(_=Y.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 1.5h11"})));function th(){return(th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}var tp=e=>Y.createElement("svg",th({xmlns:"http://www.w3.org/2000/svg",width:12,height:11,fill:"none"},e),h||(h=Y.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 1v9M1 5.5h10"})));function tm(e){let{title:t,value:s,setValue:l,prevDisable:r,nextDisable:a}=e,n=m.useCallback(()=>{l(s-1)()},[l,s]),i=m.useCallback(()=>{l(s+1)()},[l,s]);return(0,p.jsxs)("div",{className:tu().counter_wrapper,children:[(0,p.jsx)("span",{className:tu().title,children:t}),(0,p.jsxs)("div",{className:tu().counter,children:[(0,p.jsx)("div",{className:N()(tu().counter_button,{[tu().disable]:r}),onClick:n,role:"button",children:(0,p.jsx)(t_,{className:tu().counter_icon})}),(0,p.jsx)("span",{children:s}),(0,p.jsx)("div",{className:N()(tu().counter_button,{[tu().disable]:a}),onClick:i,role:"button",children:(0,p.jsx)(tp,{className:tu().counter_icon})})]})]})}var tv=s(23588),ty=s.n(tv);let tf=["до 1 года","1 год","2 года","3 года","4 года","5 лет"];function tx(e){let{number:t,value:s,setValue:l,isValid:r}=e;return(0,p.jsxs)("div",{className:ty().root,children:[(0,p.jsxs)("span",{children:["Возраст ",t,"-ого ребенка"]}),(0,p.jsxs)("select",{name:"age",id:"age",onChange:l(t-1),className:N()({[ty().valid]:!s&&r}),children:[!s&&(0,p.jsx)("option",{value:"",disabled:!0,selected:!0,className:ty().disabled,children:"Выбрать"}),tf.map((e,t)=>(0,p.jsx)("option",{value:t,selected:t===s,children:e},t))]})]})}function tb(e){let{isActive:t,setIsActive:s,setValue:l,value:r}=e,[a,n]=m.useState(!1),[i,o]=m.useState(r),c=m.useCallback(e=>()=>{i.adult>=4&&e>i.adult||i.adult<=1&&e<i.adult||i.sum>=5&&e>i.adult||o(t=>({...t,adult:e,sum:t.children+e}))},[i]),u=m.useCallback(e=>()=>{if(i.children<=0&&e<i.children||i.sum>=5&&e>i.children)return;if(e<i.children)return o(t=>{let s=i.childrenAge.filter((t,s)=>s!==e);return{...t,children:e,sum:t.adult+e,childrenAge:s}});let t=[...i.childrenAge,null];o(s=>({...s,children:e,sum:s.adult+e,childrenAge:t})),n(!1)},[i]),d=m.useCallback(e=>t=>{o(s=>{let l=[...s.childrenAge];return l[e]=Number(t.target.value),{...s,childrenAge:l}})},[]),_=i.adult<=1,h=i.adult>=4||i.sum>=5,v=i.children<=0,y=i.sum>=5;return(0,p.jsxs)("div",{className:N()(to().root,{[to().active]:t}),children:[(0,p.jsx)("span",{className:to().title,children:"Гости"}),(0,p.jsxs)("div",{className:to().counters_wrapper,children:[(0,p.jsx)(tm,{title:"Взрослые",value:i.adult,setValue:c,prevDisable:_,nextDisable:h}),(0,p.jsx)(tm,{title:"Дети младше 6 лет",value:i.children,setValue:u,prevDisable:v,nextDisable:y})]}),(0,p.jsxs)("div",{className:to().bottom,children:[(0,p.jsx)("div",{children:Array.from({length:i.children}).map((e,t)=>(0,p.jsx)(tx,{number:t+1,value:i.childrenAge[t],setValue:d,isValid:a},t))}),(0,p.jsx)(ej.z,{className:to().button,green:!0,onClick:()=>{if(i.childrenAge.includes(null)){n(!0);return}l(i),s(!1)},children:"Готово"})]})]})}var tj=s(44110),tg=s.n(tj);function tk(e){let{title:t,value:s,isActive:l,setIsActive:r,icon:a}=e;return(0,p.jsxs)("div",{className:N()(tg().root,{[tg().active]:l}),onClick:()=>r(e=>!e),children:[(0,p.jsx)("span",{className:N()(tg().title,tg().string),children:t}),(0,p.jsx)("span",{className:N()(tg().value,tg().string),children:s}),a]})}function tw(e){let{title:t,value:s,setValue:l,list:r,date:a,guests:n}=e,[i,o]=m.useState(!1),c=m.useRef(null),u=m.useCallback(()=>{switch(!0){case r:return(0,p.jsx)(eo.Z,{className:N()(eK().icon,eK().arrow,{[eK().active]:i})});case a:return(0,p.jsx)(e5,{className:N()(eK().icon)});case n:return(0,p.jsx)(tn,{className:N()(eK().icon)});default:return null}},[r,a,n,i]);m.useEffect(()=>{if(document&&i){let e=e=>{c.current&&(e.target===c.current||c.current.contains(e.target))||e.target.classList.contains("react-datepicker__day")||o(!1)};return document.addEventListener("click",t=>e(t)),()=>document.removeEventListener("click",t=>e(t))}},[i]);let d=r?s:s[0];return(0,p.jsxs)("div",{className:eK().root,ref:c,children:[(0,p.jsx)(tk,{title:t,value:d,isActive:i,setIsActive:o,icon:u()}),r&&(0,p.jsx)(e0,{isActive:i,setIsActive:o,setValue:l,items:[ee.t.spb,ee.t.msk]}),a&&(0,p.jsx)(tr,{isActive:i,setIsActive:o,value:s[1],setValue:l}),n&&(0,p.jsx)(tb,{isActive:i,setIsActive:o,setValue:l,value:s[1]})]})}var tN=s(47907);function tC(e){let{closeModal:t,setTlFilter:s,selectedCity:l,setSelectedCity:r,selectedDate:a,setSelectedDate:n,selectedGuests:i,setSelectedGuests:o}=e,c=m.useCallback(e=>()=>{r(e)},[r]),u=m.useCallback(e=>()=>{n(e)},[n]),d=(0,Q.WU)(a[0],"dd.MM.yyyy"),_=(0,Q.WU)(a[1],"dd.MM.yyyy"),h=[{title:"Город",value:l,setValue:c,list:!0,date:!1,guests:!1},{title:"Дата заезда-выезда",value:[`${d} - ${_}`,a],setValue:u,list:!1,date:!0,guests:!1},{title:"Гости",value:[`${i.adult}  ${i.adult>1?"взрослых":"взрослый"},  ${i.children} ${1===i.children?"ребенок":"детей"}`,i],setValue:o,list:!1,date:!1,guests:!0}],v=(0,tN.usePathname)(),y=m.useCallback(()=>{if(l===ee.t.msk){let e="/hotels/msk/";v!==e&&window.history.replaceState(null,"",e)}if(l===ee.t.spb){let e="/hotels/spb/";v!==e&&window.history.replaceState(null,"",e)}s(),t()},[t,s,l,v]);return(0,p.jsxs)("div",{className:eJ().root,children:[(0,p.jsx)("span",{className:eJ().title,children:"Изменить поиск:"}),(0,p.jsx)(ew.P,{close:t,className:eJ().close_button}),(0,p.jsx)("div",{className:eJ().inputs_wrapper,children:h.map((e,t)=>{let{title:s,value:l,setValue:r,list:a,date:n,guests:i}=e;return(0,p.jsx)(tw,{title:s,value:l,setValue:r,list:a,date:n,guests:i},t)})}),(0,p.jsx)(ej.z,{className:eJ().button,purple:!0,xl:!0,onClick:y,children:"Искать"})]})}var tS=s(68670),tD=s.n(tS),tM=s(58165),tO=s(96131),tI=s.n(tO),tE=s(2441),tH=s.n(tE);function tF(e){let{value:t,isChecked:s,handleClickFilter:l}=e;return(0,p.jsx)("div",{className:N()(tH().root,{[tH().active]:s}),onClick:l(s,t),role:"switch","aria-checked":s,children:(0,p.jsx)("div",{className:N()(tH().toggle,{[tH().active]:s})})})}var tA=s(55014),tP=s.n(tA);function tz(e){let{title:t,className:s}=e;return(0,p.jsx)("span",{className:N()(tP().root,s),children:t})}function tR(e){let{title:t,selectedFilters:s,handleClickFilter:l}=e;return(0,p.jsxs)("div",{className:tI().root,children:[(0,p.jsx)(tz,{title:t}),(0,p.jsxs)("div",{className:tI().wrapper,children:[(0,p.jsx)(tF,{value:t,isChecked:s.includes(t),handleClickFilter:l}),(0,p.jsx)("span",{children:"Да"})]})]})}var tL=s(41922),tW=s.n(tL);function tV(e){let{children:t}=e,[s,l]=m.useState(!1),r=(0,R.GS)(L.ai),a=t?.props?.items?.length>5;return(0,p.jsxs)("div",{className:tW().root,children:[(0,p.jsx)("div",{className:N()(tW().wrapper,{[tW().active]:s}),children:t}),a&&r&&(0,p.jsxs)("span",{className:tW().button,role:"button",onClick:()=>l(e=>!e),children:[s?"Скрыть":"Показать еще",(0,p.jsx)(eg.Z,{className:N()(tW().arrow,{[tW().active]:s})})]})]})}var tB=s(27604),t$=s.n(tB),tq=s(73527);function tG(e){let{title:t,items:s,popUp:l,selectedFilters:r,handleClickFilter:a}=e,[n,o]=m.useState(!1);return(0,p.jsxs)("div",{className:t$().root,children:[(0,p.jsx)(tz,{title:t}),s&&s.map((e,t)=>(0,p.jsxs)("div",{className:t$().wrapper,children:[(0,p.jsx)(ed,{name:e,isChecked:r.includes(e),handleClickFilter:a}),l&&l.item===e&&(0,p.jsxs)("div",{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:()=>o(e=>!e),children:[(0,p.jsx)(tq.Z,{className:t$().icon}),(0,p.jsx)("p",{className:N()(t$().pop_up,{[t$().active]:n}),dangerouslySetInnerHTML:{__html:l.text}})]})]},t)),t===i.amenities&&(0,p.jsx)("span",{className:t$().footnote,children:"*Не во всех номерах"})]})}var tT=s(94889),tU=s.n(tT);function tZ(e){let{clearFilters:t,close:s}=e;return(0,p.jsxs)("div",{className:tU().root,children:[(0,p.jsx)(ej.z,{className:tU().clear,onClick:t,children:(0,p.jsx)("span",{children:"Сбросить все"})}),(0,p.jsx)(ej.z,{className:tU().apply,onClick:s,green:!0,xl:!0,children:"Применить"})]})}function tJ(e){let{isOpen:t,close:s,clearFilters:l,selectedFilters:r,handleClickFilter:a,cityPage:n}=e,i=n===ee.t.msk?ev:em;return(0,p.jsx)("div",{className:N()(tD().root,{[tD().active]:t}),children:(0,p.jsxs)("div",{className:tD().wrapper,children:[(0,p.jsx)(ew.P,{close:s,className:tD().close}),(0,p.jsx)("div",{className:tD().tags,children:i[0].items?.map((e,t)=>p.jsx(tM.v,{name:e,isChecked:r.includes(e),handleClickFilter:a},t))}),(0,p.jsx)(T,{className:tD().filters,children:(0,p.jsx)("div",{className:tD().filters_wrapper,children:i.map((e,t)=>{let{title:s,type:l,items:n,popUp:i}=e;if(!(t<1)){if(l===o.checkbox)return(0,p.jsx)(tV,{children:(0,p.jsx)(tG,{title:s,items:n,popUp:i,selectedFilters:r,handleClickFilter:a},t)},t);if(l===o.switch)return(0,p.jsx)(tV,{children:(0,p.jsx)(tR,{title:s,selectedFilters:r,handleClickFilter:a})},t)}})})}),(0,p.jsx)(tZ,{clearFilters:l,close:s})]})})}let tY=()=>{let[e,t]=m.useState(!1),[s,l]=m.useState(!1),[r,a]=m.useState(!1),n=m.useCallback(()=>{t(!0)},[]),i=m.useCallback(()=>{t(!1)},[]);return{isOpenModal:e,isOpenFilters:s,isOpenMapMobile:r,openModal:n,closeModal:i,openFilters:m.useCallback(()=>{l(!0)},[]),closeFilters:m.useCallback(()=>{l(!1)},[]),handleOpenMapMobile:m.useCallback(()=>{a(e=>(document&&(document.body.style.overflowY=e?"auto":"hidden"),!e))},[])}};var tK=function(e){let[t,s]=(0,m.useState)(()=>{try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){console.error("Failed to retrieve item from Local Storage:",e)}return null});return(0,m.useEffect)(()=>{try{null!==t?window.localStorage.setItem(e,JSON.stringify(t)):window.localStorage.removeItem(e)}catch(e){console.error("Failed to set item in Local Storage:",e)}},[e,t]),[t,s]};let tX=e=>{let[t,s]=m.useState(null),[l,r]=m.useState(""),a=new Date,n=(0,e8.E)(a,1),[i,o]=m.useState(e),[c,u]=m.useState([a,n]),[d,_]=m.useState({adult:2,children:0,sum:2,childrenAge:[]}),h=m.useCallback(()=>{s({city:i,date:[(0,Q.WU)(c[0],"yyyy-MM-dd"),(0,Q.WU)(c[1],"yyyy-MM-dd")],guests:d.sum,adult:d.adult,children:d.children,childrenAge:d.childrenAge})},[i,c,d.adult,d.children,d.childrenAge,d.sum,s]);m.useEffect(()=>{if(!t)return;let e={date:t?.date[0],nights:(0,e6.j)(t?.date[1],t?.date[0]).toString(),adults:t?.adult.toString(),"children-age":t.childrenAge.join(";")};r(new URLSearchParams(e).toString())},[t]);let[p]=tK("tl-guests"),[v]=tK("tl-arrivalDate"),[y]=tK("tl-nights");return m.useEffect(()=>{if(!p||!v||!y)return;let e=p&&JSON.parse(p.value),t=e&&e[0].adults,s=e&&e[0].children;_({adult:t||2,children:s?s.length:0,sum:s&&t?t+s.length:2,childrenAge:s||[]});let l=new Date(v.value),r=(0,e8.E)(l,y.value);u([l,r])},[p,v,y]),{filterTL:t,setTlFilter:h,selectedCity:i,setSelectedCity:o,selectedDate:c,setSelectedDate:u,selectedGuests:d,setSelectedGuests:_,queryParams:l}};var tQ=s(87809);async function t0(e,t,s,l,r){try{let a=await fetch("/getPrice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start_date:e,end_date:t,max_nights:s,guests:l,room_types:r})});if(!a.ok)throw Error(`Failed to fetch price. Status: ${a.status}`);return await a.json()}catch(e){throw console.error("Error fetching price:",e),e}}function t1(e){let{city:t,hotels:s}=e;t=t||ee.t.spb;let l=(0,R.GS)(L.ai),[r,a]=m.useState(null),[n,i]=m.useState(""),[o,c]=m.useState(""),[u,d]=m.useState({}),[_,h]=m.useState({}),{isOpenModal:v,isOpenFilters:f,isOpenMapMobile:x,openModal:b,closeModal:j,openFilters:g,closeFilters:k,handleOpenMapMobile:w}=tY(),{selectedFilters:N,removeFilter:C,clearFilters:S,handleClickFilter:D}=eU(),{filterTL:M,setTlFilter:O,selectedCity:I,setSelectedCity:E,selectedDate:H,setSelectedDate:F,selectedGuests:A,setSelectedGuests:P,queryParams:z}=tX(t),W=m.useCallback((e,s,l)=>e?e.filter(e=>(!l||e.city===l.city)&&(!!l||!t||e.city===t)&&(!Object.keys(u).length||!l||!!u[e.id])&&s.every(t=>isNaN(Number(t))?e.stars===t||e.services.includes(t)||e.locations.includes(t):e.people>=Number(t))):e,[t,u]),V=M?.city?M.city:t;return m.useEffect(()=>{s&&a(W(s,N,M))},[N,s,W,M]),m.useEffect(()=>{let e=setInterval(()=>{let t=localStorage.getItem("room_types");t&&(h(JSON.parse(t)),clearInterval(e))},600);return()=>clearInterval(e)},[]),m.useEffect(()=>{Object.values(_).length<1||(async()=>{let e=e=>(0,Q.WU)(e,"yyyy-MM-dd"),t=(e,t)=>(0,e6.j)(t,e),s=e=>e.adult+(e.childrenAge.length?e.childrenAge.length-1:0),l=async(l,r)=>{if(l&&r){let[a,n]=l;d(await t0(e(a),e(n),t(a,n),s(r),_))}};M&&await l(M.date,M)})().then()},[M,_]),(0,p.jsxs)(p.Fragment,{children:[!x&&(0,p.jsx)(tQ.AdBanner,{light:!0,map:!0}),(0,p.jsxs)("section",{className:y().root,children:[(0,p.jsx)(eD,{hotels:r,filterTL:M,isOpenFilters:f,openFilters:g,selectedFilters:N,removeFilter:C,clearFilters:S,handleClickFilter:D,selectedHotelID:n,setHoverHotelID:c,setSelectedCity:E,hoverHotelID:o,openModal:b,isOpenMapMobile:x,handleOpenMapMobile:w,queryParams:z,cityPage:V,selectedDate:H,selectedGuests:A,price:u}),(0,p.jsx)(tJ,{isOpen:f,close:k,selectedFilters:N,handleClickFilter:D,clearFilters:S,cityPage:V}),r&&(0,p.jsx)(e$,{isOpenMapMobile:x,hotels:r,city:I,selectedHotelID:n,setSelectedHotelID:i,hoverHotelID:o,setHoverHotelID:c,queryParams:z,price:u}),(0,p.jsx)(ek.u,{isOpen:v,close:j,opacityBG:l?0:.4,mobileCloseIcon:!1,notDelayed:l,children:(0,p.jsx)(tC,{closeModal:j,setTlFilter:O,selectedCity:I,setSelectedCity:E,selectedDate:H,setSelectedDate:F,selectedGuests:A,setSelectedGuests:P})})]})]})}},10087:function(e,t,s){"use strict";s.d(t,{y:function(){return m}});var l=s(57437);s(2265);var r=s(13114),a=s.n(r),n=s(16480),i=s.n(n),o=s(8792),c=s(51388),u=s(18123),d=s(79189),_=s(43431),h=s(42256),p=s(29624);function m(e){let{title:t,address:s,slides:r,id:n,queryParams:m,price:v,isSlider:y}=e,f=u.H[n],x=f?"a":o.default,b=f||(0,c.V)(m,n);return(0,l.jsxs)(x,{className:i()(a().root),href:b,...f?{target:"_blank",rel:"noreferrer nofollow"}:{},children:[(0,l.jsx)(d.l,{images:r,isActive:!0,isMapCard:!0,isSlider:!0}),(0,l.jsx)(_.l,{title:t,isSlider:y}),(0,l.jsx)(h.Y,{text:s,location:"1",className:a().location,hotelsSelect:!0}),(0,l.jsx)(p.y,{isHover:!0,price:v[n],isBalloon:!0,isSlider:y})]})}},29624:function(e,t,s){"use strict";s.d(t,{y:function(){return m}});var l,r=s(57437);s(2265);var a=s(75803),n=s.n(a),i=s(16480),o=s.n(i),c=s(74898),u=s(52846);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e}).apply(this,arguments)}var _=e=>u.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:7,height:12,fill:"none"},e),l||(l=u.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 5 5-5 5"}))),h=s(24843),p=s(2769);function m(e){let{isHover:t,isBalloon:s,isSlider:l,price:a}=e,i=(0,h.GS)(p.ai);return(0,r.jsxs)("div",{className:o()(n().root,{[n().balloon]:s}),children:[(0,r.jsx)("span",{className:n().price,children:a?`От ${a} ₽`:""}),(0,r.jsx)(c.z,{className:o()(n().button,{[n().hover]:t},{[n().balloon]:s},{[n().slider]:l}),green:!0,l:!0,children:l?"Забронировать":i||s?(0,r.jsx)(_,{}):"Выбрать"})]})}},79189:function(e,t,s){"use strict";s.d(t,{l:function(){return h}});var l=s(57437),r=s(2265),a=s(15864),n=s.n(a),i=s(20703),o=s(16480),c=s.n(o),u=s(48344),d=s(45543);s(86978),s(70501),s(67090);var _=s(17269);function h(e){let{images:t,isActive:s,isMapCard:a,isSlider:o}=e,h=r.useRef(null),p=r.useRef(null),m=e=>{e.preventDefault(),e.stopPropagation()};return(0,l.jsxs)("div",{className:c()(n().root,{[n().map_card]:a}),children:[(0,l.jsx)(_.Z,{className:c()(n().arrow,n().prev,{[n().active]:s&&t.length>1}),onClick:e=>{m(e),p?.current?.slidePrev()}}),(0,l.jsx)(_.Z,{className:c()(n().arrow,n().next,{[n().active]:s&&t.length>1}),onClick:e=>{m(e),p?.current?.slideNext()}}),(0,l.jsx)(u.tq,{className:c()(n().slider,"pagination-hotels-card"),modules:[d.tl],pagination:{dynamicBullets:!0},spaceBetween:0,slidesPerView:1,loop:!0,ref:h,lazy:"true",onSwiper:e=>p.current=e,children:t.map((e,t)=>{if(!o||!(t>2))return(0,l.jsx)(u.o5,{className:n().slide,children:(0,l.jsx)(i.default,{className:c()(n().image),src:e,alt:"img",width:400,height:400,loading:t>0?"lazy":"eager",priority:t<1})},t)})})]})}},43431:function(e,t,s){"use strict";s.d(t,{l:function(){return o}});var l=s(57437);s(2265);var r=s(39569),a=s.n(r),n=s(16480),i=s.n(n);function o(e){let{title:t,isSlider:s}=e;return s?(0,l.jsx)("span",{className:i()(a().root,a().slider),children:t}):(0,l.jsx)("h2",{className:a().root,children:t})}},68036:function(e,t,s){"use strict";var l,r;s.d(t,{t:function(){return l}}),(r=l||(l={})).spb="Санкт-Петербург",r.msk="Москва"},18123:function(e,t,s){"use strict";s.d(t,{H:function(){return l}});let l={22982:"https://apart-rooms.ru/booking?hotel_id=22982"}},51388:function(e,t,s){"use strict";s.d(t,{V:function(){return n}});var l=s(84402);let r=e=>e===l.hotelsID.pokrovka?"msk":"spb";var a=s(90683);let n=(e,t)=>e.length>0?`/hotels/${r(t)}/${a.D[t]}?${e}`:`/hotels/${r(t)}/${a.D[t]}`},92937:function(){},23613:function(){},67090:function(){},94889:function(e){e.exports={root:"style_root__8Yk_A",apply:"style_apply__LeDWg",clear:"style_clear__a8Fvx"}},25622:function(e){e.exports={root:"style_root__JDIIU",disabled:"style_disabled__oqTqu",active:"style_active__rqdkR"}},27604:function(e){e.exports={root:"style_root__70mwm",wrapper:"style_wrapper__OhjlC",icon:"style_icon__x7Oy7",pop_up:"style_pop_up__NbXwi",active:"style_active__hg4jl",footnote:"style_footnote___pZEe"}},96131:function(e){e.exports={root:"style_root__umeVd",wrapper:"style_wrapper__Y5_BF"}},41922:function(e){e.exports={root:"style_root__wxhAv",wrapper:"style_wrapper__VHbz5",active:"style_active___ib2R",button:"style_button__RAjIy",arrow:"style_arrow__2B3Ht"}},55014:function(e){e.exports={root:"style_root__pd5HM"}},2441:function(e){e.exports={root:"style_root__Nf2MX",active:"style_active__qZhBs",toggle:"style_toggle__j692M"}},68670:function(e){e.exports={root:"style_root__XrR_X",active:"style_active__vmNL2",wrapper:"style_wrapper__nw6qf",close:"style_close__Z2c41",filters:"style_filters__zjyCe",filters_wrapper:"style_filters_wrapper__6ja0J",tags:"style_tags__c9uMa"}},99931:function(e){e.exports={root:"style_root__Ah2Dh"}},13114:function(e){e.exports={root:"style_root__SWmTU",location:"style_location__NK09X"}},86743:function(e){e.exports={root:"style_root__2UzxK"}},65853:function(e){e.exports={root:"style_root__g_lte",active:"style_active__j_Ox8",gradient:"style_gradient__AwkiZ"}},46702:function(e){e.exports={title:"style_title__kF563",counter:"style_counter__bjm3s",counter_icon:"style_counter_icon__gNt5x",counter_button:"style_counter_button__9UUmA",disable:"style_disable__bdhRs"}},78577:function(e){e.exports={root:"style_root__uogk_",icon:"style_icon__nkVsk",arrow:"style_arrow__1nixM",active:"style_active__YJxwh"}},44110:function(e){e.exports={root:"style_root__Rdb_O",active:"style_active__FRpWV",title:"style_title__YI1uv",value:"style_value__VATk9",string:"style_string__Yv_eU"}},6582:function(e){e.exports={root:"style_root__tNTvS",active:"style_active__car5h",title:"style_title__vRPTX",counters_wrapper:"style_counters_wrapper__ES92_",bottom:"style_bottom__vzbzd",select_wrapper:"style_select_wrapper__tJ99f",button:"style_button__gHnYg"}},29703:function(e){e.exports={root:"style_root__6yGch",active:"style_active__ZjcVh",bottom:"style_bottom__wvrHT"}},6323:function(e){e.exports={root:"style_root__xncHH",active:"style_active__c2Q9k"}},23588:function(e){e.exports={root:"style_root__qRsS1",valid:"style_valid__ZN7ek",disabled:"style_disabled__gaQRh"}},24032:function(e){e.exports={root:"style_root__wjKQ3",title:"style_title__AZd9K",inputs_wrapper:"style_inputs_wrapper__RqFQz",button:"style_button__l1nfG",close_button:"style_close_button__ta04O"}},4338:function(e){e.exports={root:"style_root__N8mxx",amenities:"style_amenities__qS9z8"}},58924:function(e){e.exports={root:"style_root__O2V94",location_2:"style_location_2__GoePZ"}},75803:function(e){e.exports={root:"style_root__C2_YP",balloon:"style_balloon__U9Iso",price:"style_price__zCEpF",button:"style_button__gMJi_",hover:"style_hover__fGxkl",slider:"style_slider__SPxKf"}},15864:function(e){e.exports={root:"style_root__4cO7K",map_card:"style_map_card__9kK5K",slider:"style_slider__iSwL_",slide:"style_slide__XyRs1",arrow:"style_arrow__huCHx",active:"style_active__zC7D4",prev:"style_prev__UpIf1",next:"style_next__4cYVj"}},39569:function(e){e.exports={root:"style_root__j9W0V",slider:"style_slider__sSI7W"}},82901:function(e){e.exports={root:"style_root__eS5rT",hover:"style_hover__2B8zF"}},60509:function(e){e.exports={root:"style_root__RkpJv",map_active:"style_map_active__IeP7a",cards_wrapper:"style_cards_wrapper__aHrwU",gradient:"style_gradient__T_UTw"}},42241:function(e){e.exports={root:"style_root__2Jb4E",text:"style_text__dmSkH",checkbox:"style_checkbox__WL9Jm"}},69889:function(e){e.exports={root:"style_root__DwnrD",hover:"style_hover__cVARE",msk:"style_msk__HfPRr",title:"style_title__ZVV2r",arrow:"style_arrow_____NR",items:"style_items__2SOv4"}},11393:function(e){e.exports={root:"style_root__1GiDQ",wrapper:"style_wrapper__IOnwG",all_filters_button:"style_all_filters_button__nK4Dt",filters:"style_filters__ZM_cZ"}},86724:function(e){e.exports={root:"style_root__9Pygg"}},46783:function(e){e.exports={root:"style_root__2Et3K",title:"style_title__S5dVQ",search_wrapper:"style_search_wrapper__TrtbY",hidden:"style_hidden__j3V9s",search:"style_search__BqLkn",city:"style_city___Jdfe",center:"style_center__RRWmI",guests:"style_guests__O5Ibm",icon:"style_icon__pXpiw"}},60892:function(e){e.exports={root:"style_root__hoYFX",title:"style_title__NOmon",filters_wrapper:"style_filters_wrapper__vCg_b",selected_title:"style_selected_title___XJBi",filter:"style_filter__oXls7"}},57967:function(e){e.exports={root:"style_root__4pwrZ",map_active:"style_map_active__d_WVb",filters_active:"style_filters_active__KgU4H",title:"style_title__sBomS",mobile_button:"style_mobile_button___SBcG",mobile_filters_wrapper:"style_mobile_filters_wrapper__LYhm_",close:"style_close__AeJDt",button:"style_button__qmAkw",mobile_filters:"style_mobile_filters__vU12R"}},94701:function(e){e.exports={root:"style_root__v4r7W"}}}]);